<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Demo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #000;
        }

        button {
            display: none;
            aspect-ratio: 1;
            border-radius: 50%;
            animation: rolling 1s linear infinite;
            animation-play-state: paused;
        }

        #ctrl.active {
            animation-play-state: running;
        }

        @keyframes rolling {
            to {
                transform: rotateZ(360deg);
            }
        }

        .loading {
            width: 100%;
            max-width: 300px;
            height: 20px;
            /* background-color: rgb(255, 255, 255, 0.9); */
            padding: 2px;
        }

        .loading-bar {
            width: 0;
            height: 100%;
            border-radius: 20px;
            background-color: #f40;
            animation: loading-ani 3s linear;
            box-shadow: 0 0 10px #fff;
        }

        @keyframes loading-ani {
            to {
                width: 100%;
            }
        }

        .box {
            height: 50vh;
            overflow-y: auto;
        }

        .inner {
            height: 200vh;
        }
    </style>
</head>

<body>
    <div class="loading">
        <div class="loading-bar" id="loading-bar"></div>
    </div>
    <button id="ctrl">play/pause</button>
    <audio src="/utils/music/Alizee-LaIslaBonita.mp3"></audio>
    <div class="box">
        <div class="inner">13</div>
    </div>
    <script>
        const audio = document.getElementsByTagName('audio')[0];
        const ctrlBtn = document.getElementById('ctrl');
        const loading = document.querySelector('.loading')
        const loadingBar = document.querySelector('#loading-bar')
        loadingBar.addEventListener('animationstart', () => {
            console.log('start');
        })
        loadingBar.addEventListener('animationend', () => {
            console.log('ending');
            // window.location.href = '/index.html'
            loading.style.display = 'none'
            ctrlBtn.style.display = 'block'

        })
        loadingBar.addEventListener('animationiteration', () => {
            console.log('animationiteration');
        })

        ctrlBtn.addEventListener('click', () => {
            audio.paused ? audio.play() : audio.pause();
        })

        audio.addEventListener('loadstart', (e) => {
            console.log('loadstart');
        })
        audio.addEventListener('progress', (e) => {
            console.log('progress');
        })
        audio.addEventListener('durationchange', (e) => {
            console.log('durationchange', audio.duration);
        })
        audio.addEventListener('loadedmetadata', (e) => {
            console.log('loadedmetadata');
        })
        audio.addEventListener('loadeddata', (e) => {
            console.log('loadeddata');
        })
        audio.addEventListener('timeupdate', (e) => {
            console.log(audio.currentTime);
        })
        audio.addEventListener('canplay', (e) => {
            console.log('canplay');
        })
        audio.addEventListener('canplaythrough', (e) => {
            console.log('canplaythrough');
        })
        audio.addEventListener('play', (e) => {
            console.log('play');
            // ctrlBtn.classList.add('active')
            ctrlBtn.style.animationPlayState = 'running'
        })
        audio.addEventListener('pause', (e) => {
            console.log('pause');
            // ctrlBtn.classList.remove('active')
            ctrlBtn.style.animationPlayState = 'paused'
        })
        audio.addEventListener('waiting', (e) => {
            console.log('waiting');
        })
        audio.addEventListener('playing', (e) => {
            console.log('playing');
        })
        audio.addEventListener('ended', (e) => {
            console.log('ended');
            ctrlBtn.classList.remove('active')
        })
        document.addEventListener('scroll', () => {
            console.log('document scroll');
        })
        window.addEventListener('scroll', () => {
            console.log('window scroll');
        })
    </script>
</body>

</html>