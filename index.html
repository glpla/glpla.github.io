<!DOCTYPE html>
<html lang="zh">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="format-detection" content="telephone=yes">
  <title>大树小站 glpla.github.io</title>
  <meta name="description"
    content="大树小站;WEB; HTML5; Vue3; Unity; Network; OA; Java; Linux; Ubuntu; Word; Excel; PPT; Office; only for personal use.">
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="https://at.alicdn.com/t/c/font_3834292_zxqb2r9tra.css">
  <link rel="stylesheet" href="./css/index.css">
  <link rel="stylesheet" href="./css/fade.css">
</head>

<body>
  <div class="mask">Loading...</div>
  <header>
    <div class="info">
      <a class="avatar" href="avatar">glpla.github.io</a>
      <h1>
        <svg class="svg-txt">
          <text class="title" x="75" y="30" text-anchor="middle" dominant-baseline="central">大树小站</text>
        </svg>
      </h1>
    </div>
    <div class="stamp"></div>
  </header>
  <div class="more" id="more"><span class="iconfont icon-angle-double-down"></span></div>
  <div class="grid" id="content">
  </div>
  <footer>
    <div class="cube">
      <div class="side s0"></div>
      <div class="side s1"></div>
      <div class="side s2"></div>
      <div class="side s3"></div>
    </div>
    <div>All rights reserved &copy; glpla 2022-2025</div>
    <div>1942194789@qq.com</div>
    <div>广州新华学院</div>
    <div>东莞 · 中国</div>
  </footer>
  <script src="/utils/lib/vanilla-tilt.min.js"></script>
  <script src="/utils/lib/scrollreveal.min.js"></script>
  <script type="module">

    import { dot } from '../utils/custom/dot.js'
    let avatar = document.querySelector('.avatar');
    let audio = new Audio('/utils/music/周澎-有我在.mp3');
    audio.addEventListener('ended', function () {
      console.log('音频播放已结束');
      avatar.classList.toggle('play')
    });
    avatar.addEventListener('click', (e) => {
      e.preventDefault();
      audio.paused ? audio.play() : audio.pause();
      avatar.classList.toggle('play')
      dot(e)
    })

    const revealOption = {
      delay: 100,
      distance: "50px",
      duration: 150,
      easing: "ease-in-out",
      origin: "bottom",
      interval: 100,
    };


    let loading = false;
    let isLoaded = false;
    const body = document.body
    const more = body.querySelector('.more');
    const grid = body.querySelector('.grid');
    more.addEventListener('click', () => {
      if (isLoaded) {
        grid.classList.toggle('active')
        more.classList.toggle('active')
        return;
      }
      console.log('hi');

      loading = true
      fetch('./common/content.html')
        .then(res => res.text())
        .then(res => {
          grid.innerHTML = res
          body.classList.add('active')

          ScrollReveal().reveal(".nav-item>*", revealOption);
          VanillaTilt.init(body.querySelectorAll(".nav-item"), {
            // glare: true
          });

          loading = false;
          isLoaded = true;
          more.classList.add('active')

          setTimeout(() => {
            body.classList.remove('active')
          }, 1000)

          const mask = document.querySelector(".mask")
          const links = document.querySelectorAll(".fade-link")
          links.forEach(link => {

            link.addEventListener("click", (e) => {
              e.preventDefault()
              let target = e.currentTarget.href

              mask.classList.add("fade-out")
              mask.addEventListener("animationend", () => {
                window.location.href = target
              })
            })
          })
        })
    })
  </script>
</body>

</html>