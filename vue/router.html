<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>路由 Router</title>
    <link rel="stylesheet" href="../css/reset2024.css">
    <link rel="stylesheet" href="../css/common2024.css">
    <link rel="stylesheet" href="../css/code.css">
    <link rel="stylesheet" href="../css/sn.css">
    <base target="_blank">
</head>

<body>
    <header>
        <h1>路由</h1>
        <span>Router</span>
    </header>
    <nav>
        <a href="" class="logo">Router</a>
        <div class="ham">
            <i class="ri-menu-line menu"></i>
            <i class="ri-close-line close"></i>
        </div>
        <div class="nav-wrap">
            <a href="" class="nav-item">概述</a>
            <a href="" class="nav-item">命名路由</a>
            <a href="" class="nav-item">嵌套路由</a>
            <a href="" class="nav-item">动态路由</a>
            <a href="" class="nav-item">查询路由</a>
            <a href="" class="nav-item">路由组件传参</a>
            <a href="" class="nav-item">编程路由</a>
        </div>
    </nav>
    <dl class="nav-cont">
        <dt>概述</dt>
        <dd>按照路径path和组件component的值对形式name-value定义路由</dd>
        <dd>每一个组件都是一个单组件文件SCF，后缀名是.vue；引入组件时，可以省略后缀名</dd>
        <dd>必须指定路由工作模式history</dd>
        <dd>所有的路由配置位于项目文件夹src → router中，通常是index.js</dd>
        <dd>路由组件应该集中、分类存放，如pages文件夹、views文件夹等视图类文件夹；其它一般组件则存放于components文件夹</dd>
        <dd>更多信息，请访问<a href="https://router.vuejs.org/zh/" class="link">Vue Router</a></dd>
        <dt>安装路由</dt>
        <dd>可以创建项目的时候指定使用路由，自动生成路由配置文件，推荐 <i class="ri-thumb-up-fill"></i></dd>
        <dd>也可以单独安装路由依赖；需要单独配置并引入，比较麻烦，不推荐</dd>
        <dd>
            <figure class="code">
                <figcaption>安装路由</figcaption>
                <pre>npm i vue-router</pre>
            </figure>
        </dd>
        <dt>定义路由</dt>
        <dd>路由必须指定path和component；命名路由中需要指定name</dd>
        <dd>
            <figure class="code">
                <figcaption>路由文件index.js配置详情</figcaption>
                <pre>
//引入路由包
import {createRouter, createWebHistory} from 'vue-router'

//引入路由组件Home；其它组件可以按需导入
import Home from '@/pages/Home'

//创建|定义路由
const router = createRouter({
    history: createWebHistory(),
    routes : [
        {
            path: '/home',
            component: Home
        },
        {
            path: '/info',
            component: () => import('../components/sub_view/Info.vue')
        },
        {
            path: '/team',
            component: () => import('../components/sub_view/Team.vue')
        },
        {
            path: '/about',
            component: () => import('../components/sub_view/About.vue')
        }
    ]
})

//导出路由
export default router
</pre>
            </figure>
        </dd>
        <dt>声明路由</dt>
        <dd>
            <figure class="code">
                <figcaption>在入口js中引入并声明路由</figcaption>
                <pre>
//引入
import router from './router'

//使用 - 链式
app.use(router).mount('#app')</pre>
            </figure>
        </dd>
        <dt>使用路由</dt>
        <dd>借助自定义组件&lt;router-link&gt;来创建链接|路由；相当于&lt;a&gt;；使用属性to代替了属性href</dd>
        <dd>借助自定义组件&lt;router-view&gt;显示与 URL 对应的组件|路由出口</dd>
        <dd>有&lt;router-link&gt;路由，则必须有&lt;router-view&gt;路由出口</dd>
        <dd>
            <figure class="code">
                <figcaption>在入口组件中使用路由</figcaption>
                <pre>
//&lt;router-link&gt; - 字符串方法；也可以使用对象方法 :to = "{path: '/about'}"
//为所有&lt;router-link&gt;指定active-class类即可高亮当前活动项
&lt;router-link to = "/home" active-class = "active"&gt;home&lt;/router-link&gt;
&lt;router-link to = "/info" active-class = "active"&gt;info&lt;/router-link&gt;
&lt;router-link to = "/team" active-class = "active"&gt;team&lt;/router-link&gt;
&lt;router-link replace to = "/about" active-class = "active"&gt;about&lt;/router-link&gt;

//&lt;router-view&gt;
&lt;router-view&gt;&lt;/router-view&gt;</pre>
            </figure>
        </dd>
        <dt>重定向路由 - redirect</dt>
        <dd>让指定的路由重新定位到另外一个路由</dd>
        <dd>重定向通过路由配置完成</dd>
        <dd>重定向的目标可以是一个命名路由</dd>
        <dd>通常是最后一个路由配置项</dd>
        <dd>
            <figure class="code">
                <figcaption>配置重定向路由</figcaption>
                <pre>
{
    path: '/',
    redirect: '/home'
},
{
    path: '/',
    redirect: {name: "zhuye"}
}</pre>
            </figure>
        </dd>
        <dt>路由器模式 - history</dt>
        <dd>1. history模式</dd>
        <dd>路由配置项</dd>
        <dd>URL不带#，为传统网站URL</dd>
        <dd>需要服务器端配合处理路径，否则容易出现404；后端运维基本技能</dd>
        <dd class="code">
            <pre>history: createWebHistory()</pre>
        </dd>
        <dd>2. hash模式</dd>
        <dd>路由配置项</dd>
        <dd>URL带#，看起来不够美观</dd>
        <dd>SEO优化性能略微不足</dd>
        <dd>兼容性更好，不需要服务器端配合处理路径；前后端开发比较省心</dd>
        <dd class="code">
            <pre>history: createWebHashHistory()</pre>
        </dd>
        <dd class="tips">
            <div>使用生命周期函数检查各路由组件的挂载和卸载情况</div>
            <div>默认是push模式，浏览器可以回退；使用replace属性可以防止浏览器回退</div>
        </dd>
    </dl>
    <div class="chap">命名路由 - name</div>
    <dl class="nav-cont">
        <dd>一般情况下，使用path定义的路由即可</dd>
        <dd>除了 path 之外，你还可以为任何路由提供 name</dd>
        <dd>某些情况下，如多级路由，希望路由更直观、灵活，可以给路由起个名字，通过名字来使用路由</dd>
        <dd>注意区分名字和组件</dd>
        <dd>
            <figure class="code">
                <figcaption>定义命名路由</figcaption>
                <pre>
{
    path: '/home',
    name: "zhuye",
    component: Home
}</pre>
            </figure>
        </dd>
        <dd>向 router-link 组件的 to 属性传递一个对象：属性绑定</dd>
        <dd>
            <figure class="code">
                <figcaption>使用命名路由 - 对象方式</figcaption>
                <pre>
&lt;router-link :to = "{name: 'zhuye'}" active-class = "active"&gt;home&lt;/router-link&gt;</pre>
            </figure>
        </dd>
        <dd>更多案例 - 混合使用普通路由path和命名路由name</dd>
        <dd class="code">
            <pre>
&lt;router-link to="/"&gt;home&lt;/router-link&gt;
&lt;router-link to="/team"&gt;team&lt;/router-link&gt;
&lt;router-link to="/work"&gt;work&lt;/router-link&gt;
&lt;router-link :to="{ name: 'about' }"&gt;about&lt;/router-link&gt;</pre>
        </dd>
    </dl>
    <div class="chap">嵌套路由 - children</div>
    <dl class="nav-cont">
        <dt>说明</dt>
        <dd>路由展示区&lt;router-view&gt;嵌套了第2层路由逻辑</dd>
        <dd>利用children属性为路由增加并配置子级路由</dd>
        <dd>子级路由path不需要使用/</dd>
        <dd>第一个默认显示的路由，path置空''，如html5</dd>
        <dd></dd>
        <dd>
            <figure class="code">
                <figcaption>配置子级路由</figcaption>
                <pre>
{
    path: '/work',
    name: "work",
    component: Work,
    children:[
        {
            path: '',
            name: "html5",
            component: Html5
        },
        {
            path: 'css3',
            name: "css3",
            component: CSS3
        },
        {
            path: 'js',
            name: "js",
            component: JavaScript
        }
    ]
}</pre>
            </figure>
        </dd>
        <dd>第一个默认显示路由和和父级路由保持一致，如html5</dd>
        <dd>
            <figure class="code">
                <figcaption>&lt;router-link&gt;要写完整路由</figcaption>
                <pre>
&lt;router-link to = "/work" active-class = "active"&gt;html5&lt;/router-link&gt;
&lt;router-link to = "/work/css3" active-class = "active"&gt;css3&lt;/router-link&gt;
&lt;router-link to = "/work/js" active-class = "active"&gt;js&lt;/router-link&gt;</pre>
            </figure>
        </dd>
        <dd class="tips">
            <div>使用生命周期函数查看子组件和父组件的挂载和卸载情况</div>
        </dd>
    </dl>
    <div class="chap">动态路由 - params</div>
    <dl class="nav-cont">
        <dd>在URL后面采用路径的方式来传递参数，将给定匹配模式的路由映射到同一个组件，如/users/johnny 和 /users/jolyne 这样的 URL 都会映射到同一个路由；如在同一个页面根据id显示不同的商品
        </dd>
        <dd>在路径中使用一个动态字段来实现：路径参数|路由参数</dd>
        <dd>可以声明多个路径参数；?表示该参数是可选的</dd>
        <dt>配置路由参数</dt>
        <dd class="code">
            <pre>
{
    path: '/work',
    name: 'work',
    component: () => import('../components/sub_view/Work.vue'),
    children: [
        {
        path: '',
        name: 'html',
        component: () => import('../components/sub_view/Html5.vue'),
        },
        {
        path: 'css/:id',
        name: 'css',
        component: () => import('../components/sub_view/Css3.vue'),
        },
        {
        path: 'js/:id',
        name: 'js',
        component: () => import('../components/sub_view/JavaScript.vue'),
        }
    ]
}</pre>
        </dd>
        <dt>传递路由参数</dt>
        <dd>分别使用普通路由path和命名路由name传递2级路由参数</dd>
        <dd class="code">
            <pre>
&lt;router-link to="/work/css/webcss3"&gt;css&lt;/router-link&gt;
&lt;router-link :to="{ name: 'js', params: { id: 'webjs' } }"&gt;js&lt;/router-link&gt;</pre>
        </dd>
        <dt>接收路由参数</dt>
        <dd>在路由目标组件-结构-中使用$route.params接收路由参数</dd>
        <dd class="code">
            <pre>&lt;div&gt;{{ $route.params.id }}&lt;/div&gt;</pre>
        </dd>
        <dd>在路由目标组件-逻辑-中使用useRoute接收路由参数</dd>
        <dd class="code">
            <pre>
import { useRoute } from 'vue-router'
let route = useRoute()
console.log(route.params.id);</pre>
        </dd>
        <dd>另：多个路由参数的使用</dd>
        <dd class="code">
            <pre>
{
    name: "zhuye",
    path: '/home/:id/:title/:cont/:other?',
    component: Home
}</pre>
        </dd>
        <dd class="code">
            <pre>
&lt;router-link to = "{
    name: 'zhuye',
    params: {
        id: val0,
        title: val1,
        cont: val2
    }
    }" 
    active-class = "active"
&gt;
    home
&lt;/router-link&gt;</pre>
        </dd>
    </dl>
    <div class="chap">查询路由 - query</div>
    <dl class="nav-cont">
        <dd></dd>
        <dd>在URL后面采用拼接值对|查询字符串的形式来传递参数</dd>
        <dd>基本使用同动态路由</dd>
        <dd class="code">
            <pre>http://127.0.0.1:5500/vue/router.html?name=gl&age=18</pre>
        </dd>
        <dt>配置路由参数</dt>
        <dd>不需要特别配置</dd>
        <dt>传递路由参数</dt>
        <dd>分别使用普通路由path和命名路由name传递路由参数</dd>
        <dd class="code">
            <pre>
&lt;router-link :to="{ path: 'team', query: { id: 100 } }"&gt;team&lt;/router-link&gt;
&lt;router-link :to="{ name: 'info', query: { id: 200 } }"&gt;info&lt;/router-link&gt;</pre>
        </dd>
        <dt>接收路由参数</dt>
        <dd>在路由目标组件-结构-中使用$route.query接收路由参数</dd>
        <dd class="code">
            <pre>&lt;div&gt;{{ $route.query.id }}&lt;/div&gt;</pre>
        </dd>
        <dd>在路由目标组件-逻辑-中使用useRoute接收路由参数</dd>
        <dd>多个路由参数可以使用解构路由以简化语法</dd>
        <dd class="code">
            <pre>
import { useRoute } from 'vue-router'
let route = useRoute()
console.log(route.query.id);</pre>
        </dd>
        <dd>为避免失去响应式，应该使用toRefs</dd>
        <dd>
            <figure class="code">
                <figcaption>&lt;script&gt;接收路由参数</figcaption>
                <pre>
import {toRefs} from 'vue'
import {useRoute} from 'vue-router'
let route = useRoute()
let {query} = toRefs(route)</pre>
            </figure>
            <figure class="code">
                <figcaption>&lt;template&gt;渲染路由参数 - 解构路由</figcaption>
                <pre>
&lt;ul&gt;
    &lt;li&gt;{{query.id}}&lt;/li&gt;
    &lt;li&gt;{{query.title}}&lt;/li&gt;
    &lt;li&gt;{{query.cont}}&lt;/li&gt;
&lt;/ul&gt;</pre>
            </figure>
            <figure class="code">
                <figcaption>&lt;template&gt;渲染路由参数 - 不解构路由</figcaption>
                <pre>
&lt;ul&gt;
    &lt;li&gt;{{route.query.id}}&lt;/li&gt;
    &lt;li&gt;{{route.query.title}}&lt;/li&gt;
    &lt;li&gt;{{route.query.cont}}&lt;/li&gt;
&lt;/ul&gt;</pre>
            </figure>
        </dd>
    </dl>
    <div class="chap">路由组件传参 - props</div>
    <dl class="nav-cont">
        <dd>按照组件传参的形式传递路由参数</dd>
        <dd>使用更方便</dd>
        <dd>默认是针对动态路由|params类型的路由参数</dd>
        <dd>查询路由|query需要特别处理</dd>
        <dt>动态路由|params</dt>
        <dd>1. 配置路由参数 - 指定props属性为true，传递的路由参数将被当作属性传递给组件</dd>
        <dd class="code">
            <pre>
{
    path: '/home/:id/:title/:cont/:other?',
    name: "zhuye",
    component: Home,
    props: true
}</pre>
        </dd>
        <dd>2. 接收路由参数 - &lt;script&gt;中定义属性来接收路由参数</dd>
        <dd class="code">
            <pre>
defineProps(['id', 'title', 'cont'])</pre>
        </dd>
        <dd>3. &lt;template&gt;渲染路由参数 - 直接使用</dd>
        <dd class="code">
            <pre>
&lt;ul&gt;
    &lt;li&gt;{{id}}&lt;/li&gt;
    &lt;li&gt;{{title}}&lt;/li&gt;
    &lt;li&gt;{{cont}}&lt;/li&gt;
&lt;/ul&gt;</pre>
        </dd>
        <dt>查询路由|query</dt>
        <dd>1. 定制props属性 - 将路由参数的query作为返回值传递出去 - route是形参</dd>
        <dd class="code">
            <pre>
{
    name: "zhuye",
    path: '/home/:id/:title/:cont/:other?',
    component: Home,
    props:(route)=>{
        console.log(route) //包含路由的各种信息：name、params、path、query
        return route.query
    }
}</pre>
        </dd>
        <dd>2. 脚本中接收路由参数 - 定义属性</dd>
        <dd class="code">
            <pre>
defineProps(['id', 'title', 'cont'])</pre>
        </dd>
    </dl>
    <div class="chap">编程路由 - router</div>
    <dl class="nav-cont">
        <dt>说明</dt>
        <dd>除了使用 &lt;router-link&gt; 创建 &lt;a&gt; 标签来定义导航链接，还可以借助 router 的实例方法，编写代码来实现</dd>
        <dd>需引入路由包 useRouter并创建路由实例router</dd>
        <dd class="code">
            <pre>
import { useRouter } from 'vue-router'
const router = useRouter()</pre>
        </dd>
        <dd>想要导航到不同的 URL，可以使用 router.push 方法</dd>
        <dd>点击 &lt;router-link&gt; 时，相当于调用 router.push(...) </dd>
        <dd class="example-sn">3秒后跳转至首页</dd>
        <dd>
            <figure class="code">
                <figcaption>在生命周期函数中实现路由导航</figcaption>
                <pre>
//引入
import {onMounted} from 'vue'
import {useRouter} from 'vue-router'

//使用 
const router = useRouter()
onMounted(()=>{
    setTimeout(()=>{
        //router.push('/home')
        router.replace('/home')//这里通常使用replace模式
    }, 3000)
})</pre>
            </figure>
        </dd>
        <dd class="tips">
            <div>使用更为直观的倒计时实现</div>
        </dd>
    </dl>
    <iframe src="../common/footer.html" frameborder="0" scrolling="no" title="footer" id="footer"></iframe>
    <script src="../web/lib/ham2024.js"></script>
</body>

</html>