<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>事件 Events</title>
  <link rel="stylesheet" href="../css/common.css">
  <link rel="stylesheet" href="../css/footer2025.css">
  <base target="_blank">
</head>

<body>
  <header>
    <h1>事件</h1>
    <span>&commat;Events</span>
  </header>
  <dl>
    <dd>
      <div>包括：鼠标事件、键盘事件</div>
      <div>更多信息，请访问 <a href="https://vuejs.org/guide/essentials/event-handling.html">事件处理 - Event Handling</a>、<a
          href="../web/js/event.html">HTML5事件</a>、<a href="../web/js/event_agent.html">HTML5事件代理</a>、<a
          href="../minip/events.html">微信小程序事件</a></div>
      <table>
        <caption>常见事件类型</caption>
        <tr>
          <th>类型</th>
          <th>说明</th>
        </tr>
        <tr>
          <td>click</td>
          <td>鼠标单击</td>
        </tr>
        <tr>
          <td>dbclick</td>
          <td>鼠标双击</td>
        </tr>
        <tr>
          <td>keyup</td>
          <td>按下某键并松开</td>
        </tr>
        <tr>
          <td>keydown</td>
          <td>某键按下</td>
        </tr>
        <tr>
          <td>mouseup</td>
          <td>鼠标松开</td>
        </tr>
        <tr>
          <td>mousedown</td>
          <td>鼠标按下</td>
        </tr>
        <tr>
          <td>mousemove</td>
          <td>鼠标移动</td>
        </tr>
        <tr>
          <td>mouseover</td>
          <td>鼠标悬停</td>
        </tr>
      </table>
    </dd>
    <dt>v-on</dt>
    <dd>使用 v-on 指令来监听 DOM 事件，并在事件触发时执行对应的 JavaScript|事件处理函数</dd>
    <dd>
      <pre>&lt;div v-on:click="doSomething"&gt; ... &lt;/div&gt;</pre>
      <div>可简写为 <span class="warn">@</span></div>
      <pre>&lt;div @click="doSomething"&gt; ... &lt;/div&gt;</pre>
    </dd>
    <dt>Bubbling、Capturing</dt>
    <dd>
      <div>决定事件执行的顺序</div>
      <div>事件冒泡 Bubbling - <span class="warn">默认</span>行为；单击 inner，目标 inner 先执行，然后冒泡到 outer 执行</div>
      <pre>
&lt;div class="outer" @click="doOut"&gt;
    &lt;div class="inner" @click="doInner"&gt;&lt;/div&gt;
&lt;/div&gt;</pre>
      <div>事件捕获 Capturing - 单击 inner，先被 outer 捕获执行，再传播到目标 inner执行</div>
      <pre>
&lt;div class="outer" @click.capture="doOut"&gt;
    &lt;div class="inner" @click="doInner"&gt;&lt;/div&gt;
&lt;/div&gt;</pre>
    </dd>
    <dt>target、currentTarget</dt>
    <dd>
      <div>target：触发事件的目标 - 点的谁</div>
      <div>currentTarget：当前响应事件的目标；随着事件流的变化，当前目标也在变化</div>
      <div>单击 outer：点的是 outer；向上没有父级或者说没有冒泡，响应事件的也是 outer，所以 target 和 currentTarget 都是 outer</div>
      <div> 单击inner：首先 inner 响应事件，所以 target 和 currentTarget 都是 inner；然后事件冒泡到 outer，outer 响应的是 inner 绑定的事件，所以
        target 是 inner，currentTarget 是 outer</div>
      <div>更多信息，请访问 <a href="../web/js/event_target.html">event - target</a></div>
      <pre>
&lt;div class="outer" @click="doOut"&gt;
    &lt;div class="inner" @click="doInner"&gt;&lt;/div&gt;
&lt;/div&gt;</pre>
      <div>如果 inner 指定 stop，事件不会冒泡到 outer</div>
      <pre>
&lt;div class="outer" @click="doOut"&gt;
    &lt;div class="inner" @click.stop="doInner"&gt;&lt;/div&gt;
&lt;/div&gt;</pre>
      <div>如果 outer 指定 self，仅仅响应我自己绑定的事件 - 自嗨模式，不会响应 inner 冒泡的事件：target 是我，事件处理器不来自子元素</div>
      <pre>
&lt;div class="outer" @click.self="doOut"&gt;
    &lt;div class="inner" @click="doInner"&gt;&lt;/div&gt;
&lt;/div&gt;</pre>
    </dd>
    <dt>事件应用</dt>
    <dd>
      <div>0. 内联事件</div>
      <div>适合简单逻辑</div>
      <pre>
&lt;div @click="console.log('hi')"&gt;console log&lt;/div&gt;</pre>
      <div>单击，count 加1；count 要使用才可以响应；否则仅仅利用 vue devTool 数据无法响应</div>
      <pre>
&lt;div @click="count++"&gt;do something&lt;/div&gt;
&lt;div&gt;使用数据{{count}}&lt;/div&gt;</pre>
      <div>1. 普通事件 - 无参</div>
      <pre>&lt;div @click="doClick"&gt;do something&lt;/div&gt;</pre>
      <pre>
function doClick() {
    console.log('hello,world');
}</pre>
      <div>2. 携带参数 - 注意单引号和双引号的配对使用</div>
      <pre>&lt;div @click="doClickPara('18')"&gt;do something with para&lt;/div&gt;</pre>
      <pre>
function doClickPara(para) {
    console.log(para);
}</pre>
      <div>3. 使用事件对象对应的 target 获取自定义属性 data-</div>
      <pre>&lt;div @click="doClickData" data-id="101"&gt;do something with data-&lt;/div&gt;</pre>
      <pre>
function doClickData(e) {
    console.log(e.target.dataset);
}</pre>
      <div>4. 使用参数且使用自定义属性</div>
      <div>结构中需要使用特殊变量 $event 以便和普通参数区分开来</div>
      <div>JavaScript 中使用任意形参代替特殊变量 $event</div>
      <pre>&lt;div @click="doClickParaData('18', $event)" data-id="101"&gt;do something with para and data-&lt;/div&gt;</pre>
      <pre>
function doClickData(para,e) {
    console.logpara(para, e.target.dataset);
}</pre>
    </dd>
  </dl>
  <div class="chap">Modifiers</div>
  <dl>
    <dd>
      <div>限制事件特性；如点击事件常见的修饰符有</div>
      <table>
        <caption>点击事件常见修饰符</caption>
        <tr>
          <th>类型</th>
          <th>说明</th>
        </tr>
        <tr>
          <td>.prevent</td>
          <td>阻止默认事件<br>&lt;form&gt; 的默认提交刷新；&lt;a&gt; 的默认跳转和刷新</td>
        </tr>
        <tr>
          <td>.stop</td>
          <td>停止事件的传播/冒泡 <br>多用于子元素</td>
        </tr>
        <tr>
          <td>.self</td>
          <td>事件对象 e.target 是自己才触发 <br>多用于父元素</td>
        </tr>
        <tr>
          <td>.once</td>
          <td>只触发一次</td>
        </tr>
        <tr>
          <td>.capture</td>
          <td><span class="warn">默认</span> 是冒泡事件；绑定一个事件捕获
            <br>从文档的根节点开始，向下传播，直到到达目标元素<br>多用于父元素
          </td>
        </tr>
        <tr>
          <td>.native</td>
          <td>使用原生事件；多用于组件<br>定义在组件上的事件默认都是自定义事件
            <br>系统认为是子组件 $emits 出来的事件；如需使用原生事件，应指定事件修饰符
          </td>
        </tr>
      </table>
    </dd>
    <dd>[<span class="iconfont icon-keyboard"></span>] 阻止<a href="../web/js/event_default.html">表单默认事件</a></dd>
    <dd>
      <div>提交时不刷新页面</div>
      <pre>
&lt;form @submit.prevent="submit"&gt;
    &lt;input type="text" name="uname" placeholder="your name"&gt;
    &lt;button&gt;submit&lt;/button&gt;
&lt;/form&gt;</pre>
    </dd>
    <dd>[<span class="iconfont icon-keyboard"></span>] 商品列表页 GoodsView.vue → 购物车 Cart.vue</dd>
    <dd>[<span class="iconfont icon-keyboard"></span>] 商品详情页 DetailsView.vue → 权益保护模态框 modal</dd>
    <dt>Key Modifier</dt>
    <dd>
      <div>指定哪个键或哪些触发；多个按键根据先后顺序指定</div>
      <div>如果不指定具体的键，任何一个键都可以触发</div>
      <div>使用 <span class="warn">别名</span> 代替键，如 enter 代表回车键、space 代表空格键、left 代表左方向键</div>
      <div>还可以使用 <span class="warn">系统按键</span> ，如 ctrl、alt、shift等</div>
      <div>多用于表单</div>
      <table>
        <caption>按键事件修饰符</caption>
        <tr>
          <th>类型</th>
          <th>说明</th>
        </tr>
        <tr>
          <td>keyup.enter</td>
          <td>按下 enter 键</td>
        </tr>
        <tr>
          <td>keyup.alt.enter</td>
          <td>按下 alt 键 + enter 键</td>
        </tr>
        <tr>
          <td>keyup.ctrl.enter</td>
          <td>配合 ctrl 键 + enter 键</td>
        </tr>
        <tr>
          <td>keydown.tab</td>
          <td>按下 tab 键未释放</td>
        </tr>
      </table>
    </dd>
  </dl>
  <div class="chap">Cases</div>
  <dl>
    <dd>[<span class="iconfont icon-keyboard"></span>] 留言板 Message</dd>
    <dd>
      <div>按 Cctrl + Enter 提交留言</div>
    </dd>
    <dd>[<span class="iconfont icon-keyboard"></span>] 购物车 Cart</dd>
    <dd>
      <div>商品数量的增加 inc 与减少 dec</div>
      <div>商品的删除 del</div>
      <div>商品的全选 selAll</div>
      <div>商品的结算 totalPrice</div>
    </dd>
    <dd>[<span class="iconfont icon-keyboard"></span>] 手动轮播 Swiper</dd>
    <dd>
      <div>单击时或定时切换图片</div>
      <div>方案1：绑定属性，使用 &lt;img&gt; 配合在线资源</div>
      <pre>&lt;img :src=" 'https://glpla.github.io/utils/coffee/coffee' + imgInd + '.jpg' " alt="swiper-img"&gt;</pre>
      <div>方案2：绑定样式，使用 background-image 配合在线资源</div>
      <pre>&lt;div&gt; :style="{ 'background-image': 'url(https://glpla.github.io/utils/coffee/coffee' + imgInd + '.jpg)' }" &lt;div/&gt;</pre>
      <div>方案3：使用静态资源处理</div>
      <div>额外增加一个元素，显示当前图片</div>
      <div>图片采用静态资源处理；放在项目 assets 目录下的 imgs 文件夹中</div>
      <pre>
import { ref } from 'vue';
let ind = ref(0)
const chg = () => {
  ind.value++
  ind.value = ind.value % 5
}
const getPic = (ind) => {
  return new URL(`./assets/imgs/${ind}.jpg`, import.meta.url).href
}</pre>
      <pre>
&lt;div&gt;{{ ind }}&lt;/div&gt;
&lt;img :src='getPic(ind)' alt=""&gt;
&lt;button @click="chg"&gt;change pic&lt;/button&gt;</pre>
    </dd>
    <dd>[<span class="iconfont icon-keyboard"></span>] 标签页 Tabcard</dd>
    <dd>
      <div>使用 &lt;nav&gt; 和 &lt;a&gt; 实现</div>
      <div>单击标签，对应的标签高亮显示</div>
      <div>阻止 &lt;a&gt; 的默认事件</div>
      <div>分别使用事件代理、不使用事件代理实现，并体会2者的区别</div>
    </dd>
  </dl>
  <div id="footer"></div>
  <script src="/utils/custom/footer2025.js"></script>
</body>

</html>