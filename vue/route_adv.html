<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>路由分类 Route</title>
  <link rel="stylesheet" href="../css/common.css">
  <link rel="stylesheet" href="../css/footer2025.css">
  <base target="_blank">
</head>

<body>
  <header>
    <h1>路由分类</h1>
    <span>&commat;Route</span>
  </header>
  <dl>
    <dd>更多路由参数配置，请访问 <a
        href="https://router.vuejs.org/zh/api/interfaces/RouteRecordSingleView.html">RouteRecordSingleView</a>
    </dd>
    <dt>命名路由 <a href="https://router.vuejs.org/zh/guide/essentials/named-routes.html">Name</a></dt>
    <dd>
      <div>通过 name 属性指定路由名称，便于在模板中引用</div>
      <div>所有路由的命名必须唯一</div>
      <div>可读性：采用语义化的命名</div>
      <div>可维护性：路由变化时，只改路由，命名可以保留</div>
      <div>更<span class="warn">简洁</span> ：使用命名导航而不是路径；特别适合嵌套路由</div>
      <div>方便重定向和别名</div>
      <div>方便使用 <a href="./route_params.html">动态路由</a> 传递参数，无须拼接字符串</div>
      <div>方便处理 <a href="./route_guard.html">路由守卫</a>；使用 name 而不是 path</div>
      <div>...</div>
      <pre>
{
  path: '/',
  component: Home,
  name: 'home'
}</pre>
    </dd>
    <dt>重定向路由 <a href="https://router.vuejs.org/zh/guide/essentials/redirect-and-alias.html">Redirect</a></dt>
    <dd>
      <div>将一个路径重定向到另一个路径，适用于 URL 标准化、旧路径迁移和默认路径设置</div>
      <div>嵌套路由不需要指定 component，因为它会重定向到目标路由，由目标路由的配置指定</div>
      <div>可以直接指定 path</div>
      <div>可以使用命名路由 name - 推荐</div>
      <div>也可以使用函数确定</div>
      <pre>
{
  path: '/',
  component: IndexView,
  name: 'index'
},
{
  path: '/home',
  redirect: '/',
  // redirect: { name: 'index' },
  name: 'home'
}</pre>
    </dd>
    <dt>嵌套路由 <a href="https://router.vuejs.org/zh/guide/essentials/nested-routes.html">Children</a>
    <dd>
      <div>嵌套路由 Nested Routes：将子路由配置到父路由中，父路由负责显示子路由，子路由负责显示内容</div>
      <div>在路由配置中使用 children 定义子路由。适合构建复杂的 SPA，特别是多层嵌套视图</div>
      <div>每个子路由都有自己的视图组件</div>
      <div>为了渲染子路由对应的视图组件，父路由对应的组件应提供 &lt;router-view&gt;</div>
      <div>子路由的 path 可以省略父级路由，不用 /；/代表根路由/根路径</div>
      <div>可以使用模块定义路由信息再引入，便于管理和复用，如用于导航菜单</div>
      <pre>
{
  path: "/work",
  component: () => import("../views/Work.vue"),
  name: "work",
  children: [
    {
      path: "html", // 省略父级路由
      component: () => import("../components/sub-view/Html.vue"),
      name: "html"
    },
    {
      path: "css", // 省略父级路由
      component: () => import("../components/sub-view/Css.vue"),
      name: "css"
    },
    {
      path: "/work/js", // 可以使用完整路由；建议所有子路由配置保持一致
      component: () => import("../components/sub-view/Js.vue"),
      name: "js"
    }
  ]
}</pre>
      <div>通常情况下，父路由匹配时，除了渲染本身视图外，还会渲染某个子路由的视图；如果不特别处理，仅仅当子路由也匹配时，才会渲染</div>
      <div>方案1：子路由使用空路由</div>
      <pre>
{
  path: "/work",
  component: () => import("../views/Work.vue"),
  name: "work",
  children: [
    {
      path: "", //空路由
      component: () => import("../components/sub-view/Html.vue"),
      name: "html"
    },
    // ...
  ]
}      </pre>
      <div>方案2：父路由重定向到子路由 - 推荐</div>
      <pre>
{
  path: '/work',
  redirect: { name: "html" }, // 使用命名路由
  // redirect: '/work/html',  // 或使用完整路由
  component: () => import('../views/Work.vue'),
  name: "work",
  children:[
    {
      path: 'html',
      component: () => import('../components/sub-view/Html.vue'),
      name: "html"
    },
    // ...
  ]
}</pre>

    </dd>
    <dt>传参路由 - <a href="https://router.vuejs.org/zh/guide/essentials/passing-props.html">Props</a></dt>
    <dd>
      <div>按照组件传参的形式传递路由参数</div>
      <div>使用更方便</div>
      <div>默认是针对 动态路由 | params 类型的路由参数；而 查询路由 | query 需要特别处理</div>
      <div>配置项 props 可以是：<span class="warn">布尔值</span>、<span class="warn">对象</span>或<span class="warn">函数</span>
      </div>
    </dd>
    <dd>1. props 为 布尔值</dd>
    <dd>
      <div>开启路由传参；默认为 false，不开启</div>
      <div>适合动态路由；参数将被当作同名属性参数在组件中使用</div>
      <div>应用最多</div>
      <div>1. 配置动态路由并启用 props 属性</div>
      <pre>
{
    path: '/home/:id/:title/:cont/:other?',
    name: "home",
    component: Home,
    props: true
}</pre>
      <div>2. 传递路由参数 - 更多参数传递方式，请参考 <a href="./router_params.html">动态路由</a></div>
      <pre>&lt;router-link to="/home/10/webjs/hi"&gt;html&lt;/router-link&gt;</pre>
      <div>3. 接收路由参数 - 按组件传参时，普通属性的定义和使用</div>
      <div>&lt;script&gt; - 定义属性来接收路由参数</div>
      <pre>
const props = defineProps(['id', 'title', 'cont'])</pre>
      <div>&lt;template&gt; - 使用|渲染路由参数</div>
      <pre>
&lt;div&gt;{{id}} - {{title}} - {{cont}}&lt;/div&gt;</pre>
    </dd>
    <dd>2. props 为 函数</dd>
    <dd>接收当前的 route 对象作为参数，包含路由的各种信息：name、params、path、query；返回一个 defineProps() 的声明</dd>
    <dd>适用于需要<span class="warn">特别处理</span>的情况，和路由类型及参数无关，可以用来处理查询路由</dd>
    <dd>除了使用路由信息外，还可以添加自定义的静态数据</dd>
    <dd>[<span class="iconfont icon-keyboard"></span>] 使用查询路由</dd>
    <dd class="sn">
      <div>配置路由参数 - 使用路由的 query 数据</div>
      <pre>
{
    path: '/home',
    name: "home",
    component: Home,
    props: route => route.query
}</pre>
      <div>传递路由参数 - 更多参数传递方式，请参考 <a href="./router_query.html">查询路由</a></div>
      <pre>
&lt;router-link :to="{ path: '/home', query: { id: 100, title: 'leading', cont: 'hi' } }"&gt;home&lt;/router-link&gt;</pre>
      <div>接收路由参数</div>
      <p>&lt;script&gt; - 定义属性来接收路由参数；要十分清楚使用了几个查询参数</p>
      <pre>
const props = defineProps(['id', 'title', 'cont'])</pre>
      <p>&lt;template&gt; - 使用|渲染路由参数</p>
      <pre>
&lt;div&gt;{{id}} - {{title}} - {{cont}}&lt;/div&gt;</pre>
    </dd>
    <dd>[<span class="iconfont icon-keyboard"></span>] 使用动态路由 - 注意类型转换</dd>
    <dd>
      <pre>
{
    path: '/about/:id/:msg',
    name: 'about',
    component: () => import('../views/AboutView.vue'),
    props: route => ({ id: Number(route.params.id), msg: route.params.msg })
}</pre>
      <pre>
const props = defineProps({
    id: Number,
    msg: String
})
</pre>
    </dd>
    <dd>3. props 为 对象</dd>
    <dd>
      <div>定义的对象<span class="warn">直接</span>作为属性在组件中使用，和路由类型及参数无关</div>
      <div>适合传递<span class="warn">静态数据</span></div>
      <div>应用不多</div>
      <div>1. 路由配置</div>
      <pre>
{
    path: '/about/:id',
    name: 'about',
    component: () => import('../views/AboutView.vue'),
    props: {
        msg: { title: 'About', flag: true },
    }
}</pre>
      <div>2. 路由组件 - &lt;script&gt; 中声明对应的 props 属性并在 &lt;template&gt; 中使用</div>
      <pre>
const props = defineProps({
    msg: {
        flag: Boolean,
        title: String
    }
})</pre>
    </dd>
    <dt>异常路由 <a href="https://router.vuejs.org/guide/essentials/history-mode.html">Caveat</a></dt>
    <dd>
      <div>处理路由目标异常的情况，如 404，页面丢失</div>
      <div>404 路由：使用自定义的路径参数|正则表达式匹配其它任意路径；通常是<span class="warn">最后一个</span>路由配置项</div>
      <div>404 路由也可以针对某个特定的路由</div>
      <div>也可以使用内置函数生成 html，避免额外创建组件</div>
      <div>如果针对根路由和特定路由的404处理都存在，特定路由应该在根路由之前，否则无法正常匹配</div>
      <pre>
import {h} from 'vue'

//...

{
  path: '/goods:pathMatch(.*)*',
  name: 'goods-not-found',
  component: h('p', {style: 'color: red'}, 'goods 404 Not Found')
},
{
  path: '/:pathMatch(.*)*',
  name: 'not-found',
  component: () => import('../views/NotFound.vue')
}</pre>
    </dd>
  </dl>
  <div class="chap">homework</div>
  <dl>
    <dd>[<span class="iconfont icon-keyboard"></span>] 路由设计2</dd>
    <dd class="sn">
      <p>在前续项目的基础上</p>
      <div>为每个路由命名</div>
      <div>为团队 /team 增加嵌套路由，分别对应各个团队成员</div>
      <div>增加异常路由处理</div>
      <div>调试并发布；将发布的 dist 目录打包压缩，以学号命名，提交到学习通</div>
      <div>代码仓库* - 将项目推送到自己的代码仓库</div>
    </dd>
  </dl>
  <div id="footer"></div>
  <script src="/utils/custom/footer2025.js"></script>
</body>

</html>