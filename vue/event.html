<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>事件 Event</title>
    <link rel="stylesheet" href="../css/reset2024.css">
    <link rel="stylesheet" href="../css/common2024.css">
    <link rel="stylesheet" href="../css/code.css">
    <link rel="stylesheet" href="../css/sn.css">
    <base target="_blank">
</head>

<body>
    <header>
        <h1>事件</h1>
        <span>Event</span>
    </header>
    <dl>
        <dt>事件绑定 v-on</dt>
        <dd>监听 DOM 事件；可以简写为 <span class="warn">@</span></dd>
        <dd class="code">
            <pre>
&lt;div v-on:click="doSomething"&gt; ... &lt;/div&gt;
&lt;div @click="doSomething"&gt; ... &lt;/div&gt;</pre>
        </dd>
        <dt>事件类型</dt>
        <dd>包括：鼠标事件、键盘事件</dd>
        <dd>
            <table class="tbl-sn">
                <caption>常见事件类型</caption>
                <tr>
                    <th>类型</th>
                    <th>说明</th>
                </tr>
                <tr>
                    <td>click</td>
                    <td>鼠标单击</td>
                </tr>
                <tr>
                    <td>dbclick</td>
                    <td>鼠标双击</td>
                </tr>
                <tr>
                    <td>keyup</td>
                    <td>按下某键并松开</td>
                </tr>
                <tr>
                    <td>keydown</td>
                    <td>某键按下</td>
                </tr>
                <tr>
                    <td>mouseup</td>
                    <td>鼠标松开</td>
                </tr>
                <tr>
                    <td>mousedown</td>
                    <td>鼠标按下</td>
                </tr>
                <tr>
                    <td>mousemove</td>
                    <td>鼠标移动</td>
                </tr>
                <tr>
                    <td>mouseover</td>
                    <td>鼠标悬停</td>
                </tr>
            </table>
        </dd>
        <dt>事件修饰符</dt>
        <dd>1. 点击事件修饰符 - 限制事件特性</dd>
        <dd>
            <table class="tbl-sn">
                <caption>常见事件修饰符</caption>
                <tr>
                    <th>类型</th>
                    <th>说明</th>
                </tr>
                <tr>
                    <td>.stop</td>
                    <td>停止父级事件的传播/冒泡</td>
                </tr>
                <tr>
                    <td>.once</td>
                    <td>只触发一次</td>
                </tr>
                <tr>
                    <td>.prevent</td>
                    <td>阻止默认事件<br>&lt;form&gt;表单的默认提交；&lt;a&gt;的默认跳转和刷新</td>
                </tr>
                <tr>
                    <td>.native</td>
                    <td>使用原生事件；多用于组件<br>定义在组件上的事件默认都是自定义事件，即：系统认为是子组件$emit出来的事件；如需使用原生时间，应指定事件修饰符</td>
                </tr>
            </table>
        </dd>
        <dd>2. 按键事件修饰符 - 指定哪个键触发的事件</dd>
        <dd>
            <table class="tbl-sn">
                <caption>按键事件修饰符</caption>
                <tr>
                    <th>类型</th>
                    <th>说明</th>
                </tr>
                <tr>
                    <td>keyup.enter</td>
                    <td>配合enter键</td>
                </tr>
                <tr>
                    <td>keyup.alt.enter</td>
                    <td>配合alt键回车</td>
                </tr>
                <tr>
                    <td>.ctrl.enter</td>
                    <td>配合ctrl键回车</td>
                </tr>
                <tr>
                    <td>keydown.tab</td>
                    <td>按下tab未释放</td>
                </tr>
            </table>
        </dd>
        <dt>事件应用</dt>
        <dd>0. 内联事件</dd>
        <dd>适合简单逻辑</dd>
        <dd class="code">
            <pre>
&lt;div @click="console.log('hi')"&gt;console log&lt;/div&gt;</pre>
        </dd>
        <dd>单击，count加1；count要使用才可以响应；否则仅仅利用vue devTool数据无法响应</dd>
        <dd class="code">
            <pre>
&lt;div @click="count++"&gt;do something&lt;/div&gt;
&lt;div&gt;使用数据{{count}}&lt;/div&gt;</pre>
        </dd>
        <dd>1. 普通事件 - 无参</dd>
        <dd class="code">
            <pre>&lt;div @click="doClick"&gt;do something&lt;/div&gt;</pre>
        </dd>
        <dd class="code">
            <pre>
function doClick() {
    console.log('hello,world');
}</pre>
        </dd>
        <dd>2. 携带参数</dd>
        <dd class="code">
            <pre>&lt;div @click="doClickPara('18')"&gt;do something with para&lt;/div&gt;</pre>
        </dd>
        <dd class="code">
            <pre>
function doClickPara(para) {
    console.log(para);
}</pre>
        </dd>
        <dd>3. 使用事件对象对应的target获取自定义属性data-</dd>
        <dd class="code">
            <pre>&lt;div @click="doClickData" data-id="101"&gt;do something with data-&lt;/div&gt;</pre>
        </dd>
        <dd class="code">
            <pre>
function doClickData(e) {
    console.log(e.target.dataset);
}</pre>
        </dd>
        <dd>4. 使用参数且使用自定义属性</dd>
        <dd>结构中需要使用特殊变量$event以便和普通参数区分开来</dd>
        <dd>js中使用任意形参代替特殊变量$event</dd>
        <dd class="code">
            <pre>&lt;div @click="doClickParaData('18', $event)" data-id="101"&gt;do something with para and data-&lt;/div&gt;</pre>
        </dd>
        <dd class="code">
            <pre>
function doClickData(para,e) {
    console.logpara(para, e.target.dataset);
}</pre>
        </dd>
        <dd class="example-sn">手动轮播</dd>
        <dd>单击时，切换图片</dd>
        <dd>额外增加一个元素，显示当前图片</dd>
        <dd>图片采用静态资源处理；放在assets目录下的imgs中</dd>
        <dd class="code">
            <pre>
import { ref } from 'vue';
let ind = ref(0)
const chg = () => {
  ind.value++
  ind.value = ind.value % 5
}
const getPic = (ind) => {
  return new URL(`./assets/imgs/${ind}.jpg`, import.meta.url).href
}</pre>
        </dd>
        <dd class="code">
            <pre>
&lt;div&gt;{{ ind }}&lt;/div&gt;
&lt;img :src='getPic(ind)' alt=""&gt;
&lt;button @click="chg"&gt;change pic&lt;/button&gt;</pre>
        </dd>
        <dd class="example-sn">购物车</dd>
        <dd>商品数量的增加inc与减少dec</dd>
        <dd>商品的删除del</dd>
        <dd>商品的全选selAll</dd>
        <dd>商品的结算totalPrice</dd>
        <dd class="example-sn">标签页切换</dd>
        <dd>使用&lt;nav&gt;和&lt;a&gt;实现</dd>
        <dd>单击标签，对应的标签高亮显示</dd>
        <dd>阻止&lt;a&gt;的默认事件</dd>
        <dd>分别使用事件代理、不使用事件代理实现，并体会2者的区别</dd>
    </dl>
    <iframe src="../common/footer.html" frameborder="0" scrolling="no" title="footer" id="footer"></iframe>
</body>

</html>