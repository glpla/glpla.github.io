<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>表单双向绑定 v-model</title>
    <link rel="stylesheet" href="../css/reset2024.css">
    <link rel="stylesheet" href="../css/common2024.css">
    <link rel="stylesheet" href="../css/code.css">
    <link rel="stylesheet" href="../css/sn.css">
    <base target="_blank">
</head>

<body>
    <header>
        <h1>表单双向绑定</h1>
        <span>v-model</span>
    </header>
    <dl>
        <dd>表单基础知识，请访问<a href="../web/form.html" class="link">web - form</a></dd>
        <dt>v-modal</dt>
        <dd>v-bind:是单向数据绑定</dd>
        <dd>数据双向绑定 - 多用于表单；数据可以影响到表单；表单也可以影响到数据</dd>
        <dd>数据可以是数值类型number，也可以是字符串类型string，还可以是布尔类型true/false</dd>
        <dt>常用事件</dt>
        <dd>1. input：输入过程中触发</dd>
        <dd>2. change：状态改变后触发；如从选中状态变为取消选中状态；根据改变后的状态，执行相应的逻辑</dd>
        <dt>常见表单元素的双向绑定</dt>
        <dd class="number">
            <div>&lt;input&gt; - text</div>
            <datagrid>单行文本输入</datagrid>
            <pre class="code">
&lt;label for="uname"&gt;Title &lt;/label&gt;
&lt;input type="text" v-model="uname" required&gt;</pre>
            <pre class="code">let uname = ref('')</pre>
            <div>&lt;textarea&gt;</div>
            <p>留言、评论</p>
            <p>不可以使用插值表达式{{}}</p>
            <pre class="code">&lt;textarea v-model="ubody" required&gt;{{msg}}&lt;/textarea&gt;</pre>
            <pre class="code">
&lt;label for="ubody"&gt;Contents&lt;/label&gt;
&lt;textarea v-model="ubody" required&gt;&lt;/textarea&gt;</pre>
            <pre class="code">let ubody = ref('')</pre>
            <p class="tips">text类型的&lt;input&gt;和&lt;textarea&gt;绑定的是 value 属性 并侦听 input 事件</p>
            <div>&lt;input&gt; - radio</div>
            <p>单选；多选一</p>
            <p>选项都绑定ugender</p>
            <p>不指定value的话，只能获取单选框的选中状态是否为on</p>
            <pre class="code">
&lt;input type="radio" id="male" v-model="ugender" value="male"&gt;
&lt;label for="male"&gt;male&lt;/label&gt;
&lt;input type="radio" id="female" v-model="ugender" value="female"&gt;
&lt;label for="female"&gt;female&lt;/label&gt;</pre>
            <div>&lt;input&gt; - checkbox</div>
            <p>多选</p>
            <p>选项都绑定ulike</p>
            <p>不指定value的话，只能获取复选框的选中状态是否为on</p>
            <p>购物车商品全选</p>
            <p>使用须知、记住密码 - 使用单个复选框实现；不需要指定value</p>
            <pre class="code">
&lt;input type="checkbox" id="code" v-model="ulike" value="code"&gt;
&lt;label for="code"&gt;code&lt;/label&gt;
&lt;input type="checkbox" id="sing" v-model="ulike" value="sing"&gt;
&lt;label for="sing"&gt;sing&lt;/label&gt;
&lt;input type="checkbox" id="game" v-model="ulike" value="game"&gt;
&lt;label for="game"&gt;game&lt;/label&gt;
&lt;input type="checkbox" id="read" v-model="ulike" value="read"&gt;
&lt;label for="read"&gt;read&lt;/label&gt;</pre>
            <pre class="code">let ulike = ref([])</pre>
            <p class="tips">&lt;radio类型的input&gt;和checkbox类型的&lt;input&gt;绑定的是 checked 属性 并侦听 change 事件</p>
            <div>&lt;select&gt;</div>
            <p>下拉列表；下拉框</p>
            <pre class="code">
&lt;div&gt;{{sum}}&lt;/div&gt;
&lt;select v-model.number = 'sel'&gt;
    &lt;option value='1'&gt;1&lt;/option&gt;
    &lt;option value='2'&gt;2&lt;/option&gt;
    &lt;option value='3'&gt;3&lt;/option&gt;
&lt;/select&gt;
&lt;button @click = 'add'&gt;add&lt;/button&gt;
&lt;button @click = 'minus'&gt;minus&lt;/button&gt;
</pre>
            <pre class="code">
let sel = ref(1)
let sum = ref(0)
function add(){
    sum.value += sel.value
}
function minus(){
    sum.value -= sel.value
}</pre>
            <p class="tips">&lt;select&gt;绑定的是 value 属性 并侦听 change 事件</p>
        </dd>
        <dd class="question">双向绑定引发的性能问题</dd>
        <dd class="example-sn">购物车，详细实现请参考<a href="./drill_cart.html" class="link">购物车 Cart</a></dd>
        <dt>修饰符</dt>
        <dd class="bg">.number</dd>
        <dd>把 v-model 的值转换成数值类型</dd>
        <dd>如果输入的第一个字是字符串，那number这个修饰符就不会生效</dd>
        <dd>输入的第一个只能是数字或者小数点或者是正负号</dd>
        <dd>既然需要转换为数字，那么就请输入数字吧</dd>
        <dd class="bg">.lazy</dd>
        <dd>在默认情况下，v-model 在input事件中同步输入框的值与数据，实时渲染</dd>
        <dd>指定lazy，会把 oninput 事件改成 onchange 事件</dd>
        <dd>当失去焦点或按下回车时才触发更新</dd>
        <dd class="bg">.trim</dd>
        <dd>过滤用户输入时首尾的空格字符</dd>
    </dl>
    <iframe src="../common/footer.html" frameborder="0" scrolling="no" title="footer" id="footer"></iframe>
</body>

</html>