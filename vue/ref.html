<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>模板引用 ref</title>
    <link rel="stylesheet" href="../css/common.css">
    <base target="_blank">
</head>

<body>
    <header>
        <h1>模板引用</h1>
        <span>&commat; ref</span>
    </header>
    <dl>
        <dt>说明</dt>
        <dd>通过普通DOM标签上ref标识获取DOM节点或组件实例；实际开发中，更多是获取组件实例</dd>
        <dd>需引入包 ref</dd>
        <dd>多组件情况下，普通的DOM获取容易产生冲突</dd>
        <dd>直接获取会失败，应在组件挂载完毕onMounted再获取</dd>
        <dd>1. 获取普通DOM - 返回DOM节点</dd>
        <dd>
            <pre>
&lt;template&gt;
    &lt;div ref="dom"&gt; Dom &lt;/div&gt;
&lt;/template&gt;
    
&lt;script setup&gt;
    import { onMounted, ref } from 'vue';
    let dom = ref(null)
    onMounted(() =&gt; {
        console.log('dom', dom.value);
    })
&lt;/script&gt;</pre>
        </dd>
        <dd>2. 获取组件 - 返回组件实例</dd>
        <dd>默认情况下，组件内部的属性和方法对外部不公开，所以获取到的ref仅仅是一个代理对象，看不到组件的内部细节</dd>
        <dd>组件需要显示的暴露属性或方法defineExpose</dd>
        <dd>defineExpose应该写在暴露的对象后面</dd>
        <dd>下面的测试组件暴露了一个属性一个方法</dd>
        <dd>
            <pre>
&lt;template&gt;
    &lt;div @click="getTitle"&gt;only for test - {{ title }}&lt;/div&gt;
&lt;/template&gt;
    
&lt;script setup&gt;
    import { ref } from 'vue';
    let title = ref(18)
    function getTitle() {
        console.log(title.value);
    }
    defineExpose({
        title,
        getTitle
    })
&lt;/script&gt;</pre>
        </dd>
        <dd class="example-sn">单击打开弹窗</dd>
        <dd>父组件获取子组件|弹窗组件实例，执行弹窗的方法</dd>
        <dd>子组件|弹窗组件定义方法并暴露；方法利用bool将弹窗组件的隐藏状态变为显示</dd>
    </dl>
    <iframe src="../common/footer.html" frameborder="0" scrolling="no" title="footer" id="footer"></iframe>
</body>

</html>