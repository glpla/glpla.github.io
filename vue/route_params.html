<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>动态路由 Params</title>
  <link rel="stylesheet" href="../css/common.css">
  <link rel="stylesheet" href="../css/footer2025.css">
  <base target="_blank">
</head>

<body>
  <header>
    <h1>动态路由</h1>
    <span>&commat;Params</span>
  </header>
  <dl>
    <dd>更多路由信息，请访问 <a
        href="https://router.vuejs.org/zh/api/interfaces/RouteLocationNormalizedLoaded.html">RouteLocationNormalizedLoaded</a>
    </dd>
    <dt>配置路由参数</dt>
    <dd>
      <div>先配置路由再使用</div>
      <div>使用通配符 <span class="warn">:</span> - wild card 定义对应当前路由的动态路由</div>
      <div>可以定义一个或多个</div>
      <div><span class="warn">?</span> 表示该参数可选</div>
      <div>如：根据 id 展示对应的内容</div>
      <pre>
{
    path: '/goods/:id',
    name: 'goods',
    component: () => import('../components/Goods.vue'),
}</pre>
    </dd>
    <dt>传递路由参数</dt>
    <dd>
      <div>在 URL 后面采用 <span class="warn">路径</span> 的方式传递参数，将给定匹配模式的路由映射到<span class="warn">同一个</span>组件，如 /goods/1
        和 /goods/2 这样的 URL 都会映射到同一个路由 /goods: 在同一个页面根据 id 显示不同的商品 </div>
      <div>动态属性绑定 to 时，只能使用<span class="warn">命名路由 name</span>，不可以使用普通路由 path - 因为匹配不到</div>
      <div class="warn">Path "/xxx" was passed with params but they will be ignored. Use a named route alongside
        params instead.</div>
      <div>推荐使用命名路由和模板字符串</div>
      <pre>
//使用1：静态路由 - 传递的 id 为 100
&lt;router-link to="/html/100"&gt;html - 100&lt;/router-link&gt;

//使用2：动态路由 - 普通拼接，变量 id 的值为 200
&lt;router-link :to="'/html/' + id"&gt;html - id/200&lt;/router-link&gt;

//使用3：动态路由 - 模板字符串，变量 id 的值为 300
&lt;router-link :to="`/html/${id}`"&gt;html - id/300&lt;/router-link&gt;

//使用4：动态路由 - 使用 name，不能使用 path
&lt;router-link :to="{ name: 'html', params: { id: 400 } }"&gt;html - id&lt;/router-link&gt;</pre>
      <div class="tips">方便起见，请直接在浏览器的地址栏输入不同的 id，调试动态路由的使用情况</div>
    </dd>
    <dt>接收路由参数</dt>
    <dd>
      <div><a href="https://router.vuejs.org/zh/api/#Functions-useRoute">useRoute()</a> 是 vue-router
        提供的组合式函数，返回一个 RouteLocationNormalized 对象，用于访问当前/激活路由的各种 <span class="warn">路由信息</span></div>
      <div>常见的路由信息有：fullPath、path、name、params、query、meta 等</div>
      <div>先引入再使用 - 引入路由包 useRoute 并创建路由实例 route</div>
      <div>动态路由参数由路由的 <span class="warn">params</span> 接收</div>
      <pre>
import { useRoute } from 'vue-router'
let route = useRoute()
console.log(route.params);</pre>
      <pre>&lt;div&gt;{{ route.params.id }}&lt;/div&gt;</pre>
      <div>使用可选链操作符 <span class="warn">?.</span> 可以有效避免没有指定/传递路由参数引起的报警；如果 route.params 为 null 或
        undefined，则不会报错，而是返回 undefined - 最佳体验</div>
      <pre>&lt;div&gt;{{ route.params?.id }}&lt;/div&gt;</pre>
      <div>如果 <span class="warn">仅仅</span> 在结构中使用，可以使用默认的全局变量 $route 解析并使用；不建议</div>
      <pre>&lt;div&gt;{{ $route.params.id }}&lt;/div&gt;</pre>
    </dd>
    <dt>注意事项</dt>
    <dd class="sn">
      <div>异常处理</div>
      <p>不确定的用户行为有可能导致路由参数为空或缺失，导致渲染失败</p>
      <p>解决方案1：使用条件渲染判断路由参数是否存在</p>
      <p>解决方案2：配置 404 路由</p>
      <div>多个路由参数</div>
      <p>尽量精准设计路由，避免使用</p>
      <p>必要时，使用命名路由，简化路由操作</p>
      <pre>
{
    path: '/home/:id/:title/:cont/:other?',
    name: "home",
    component: Home
}</pre>
      <p>不直观；可读性不好</p>
      <pre>&lt;router-link to = "/home/10/leading/conteng"&gt;home&lt;/router-link&gt;</pre>
      <p>使用命名路由</p>
      <pre>
&lt;router-link :to = "{
    name: 'home',
    params: {
        id: 10,
        title: 'leading',
        cont: 'content'
    }
}"&gt;home&lt;/router-link&gt;</pre>
    </dd>
  </dl>
  <div class="chap">summary & homework</div>
  <dl>
    <dd class="sn">
      <div>静态路由 - 可以使用普通路由 path 和命名路由 name 传递路由参数</div>
      <div>动态路由 - 使用 : 定义；数据绑定时，只能使用命名路由</div>
    </dd>
    <dd>[<span class="iconfont icon-keyboard"></span>] DetailView</dd>
    <dd>在产品列表的基础上，使用商品 id 增加动态路由，以便显示不同的商品</dd>
    <dd class="sn">
      <div>创建详情页组件 DetailView.vue</div>
      <div>引入路由并展示路由对应的商品 id 和其它信息</div>
      <div>增加商品详情页路由，使用 id 指定为动态路由</div>
      <div>修改商品列表组件 Goods.vue，绑定商品 id，增加导航功能到对应的详情页</div>
    </dd>
  </dl>
  <div id="footer"></div>
  <script src="/utils/custom/footer2025.js"></script>
</body>

</html>