<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>音频组件 audio</title>
    <link rel="stylesheet" href="../css/common.css">
    <base target="_blank">
</head>

<body>
    <header>
        <h1>音频组件</h1>
        <span>Audio</span>
    </header>
    <dl>
        <dt>说明</dt>
        <dd>展示音频的容器</dd>
        <dd>从基础库 1.6.0 开始，&lt;audio&gt;接口 <span class="warn">停止维护</span>，请使用 wx.createInnerAudioContext</dd>
        <dd>请使用在线资源或自建服务器资源；不要使用本地资源</dd>
        <dd>更多信息，请查看<a href="https://developers.weixin.qq.com/miniprogram/dev/component/audio.html">微信官方文档 - audio</a>
        </dd>
    </dl>
    <div class="chap">API</div>
    <dl>
        <dt>wx.createInnerAudioContext(Object object)</dt>
        <dd>创建内部 audio 上下文 InnerAudioContext 对象</dd>
        <dd>InnerAudioContext 音频资源不会自动释放</dd>
        <dd>如果不需要使用音频，请调用 InnerAudioContext.destroy() 释放资源，避免内存泄漏</dd>
        <dd>音频播放过程中，可能被系统中断</dd>
        <dt>wx.getBackgroundAudioManager()</dt>
        <dd>获取全局唯一的背景音频管理器；创建背景音乐管理器</dd>
        <dd>若需要在小程序切后台后继续播放音频，需要在 app.json 中配置 requiredBackgroundModes 属性；正式版还需通过审核</dd>
        <dd>设置后，即使用户离开小程序或锁屏，背景音乐也能继续播放</dd>
        <dd>更多信息，请查看 <a
                href="https://developers.weixin.qq.com/miniprogram/dev/api/media/background-audio/wx.getBackgroundAudioManager.html">官方文档</a>
        </dd>
        <dt>BackgroundAudioManager</dt>
        <dd>BackgroundAudioManager 实例</dd>
        <dd>通过 wx.getBackgroundAudioManager 获取</dd>
        <dd>更多信息，请查看 <a
                href="https://developers.weixin.qq.com/miniprogram/dev/api/media/background-audio/BackgroundAudioManager.html">官方文档</a>
        </dd>
        <dd>
            <table class="tbl-sn">
                <caption>一般属性</caption>
                <tr>
                    <th>属性</th>
                    <th>说明</th>
                </tr>
                <tr>
                    <td>src</td>
                    <td>音频资源的地址；设置了新的 src 时，会自动开始播放</td>
                </tr>
                <tr>
                    <td>title</td>
                    <td class="warn">音频标题，用于原生音频播放器音频标题；必填；分享出去的卡片标题将使用该值</td>
                </tr>
                <tr>
                    <td>startTime</td>
                    <td>开始播放的位置；单位 s</td>
                </tr>
                <tr>
                    <td>playbackRate</td>
                    <td>播放速度 0.5-2.0；默认 1</td>
                </tr>
                <tr>
                    <td>duration</td>
                    <td>当前音频的长度；只读</td>
                </tr>
                <tr>
                    <td>currentTime</td>
                    <td>当前音频的播放位置;单位 s；改变 currentTime 值等同于调用 seek；只读</td>
                </tr>
                <tr>
                    <td>paused</td>
                    <td>当前是是否暂停或停止状态；只读</td>
                </tr>
                <!-- <tr>
                    <td>autoplay</td>
                    <td>是否自动开始播放；默认 false</td>
                </tr>
                <tr>
                    <td>loop</td>
                    <td>是否循环播放；默认 false</td>
                </tr>
                <tr>
                    <td>volume</td>
                    <td>音量范围 0~1。默认 1</td>
                </tr> -->
            </table>
            <table class="tbl-sn">
                <caption>一般方法</caption>
                <tr>
                    <th>属性</th>
                    <th>说明</th>
                </tr>
                <tr>
                    <td>play()</td>
                    <td>播放</td>
                </tr>
                <tr>
                    <td>pause()</td>
                    <td>暂停。暂停后的音频再播放会从暂停处开始播放</td>
                </tr>
                <tr>
                    <td>seek()</td>
                    <td>跳转到指定位置</td>
                </tr>
                <tr>
                    <td>stop()</td>
                    <td>停止。停止后的音频再播放会从头开始播放</td>
                </tr>
                <!-- <tr>
                    <td>destroy()</td>
                    <td>销毁当前实例</td>
                </tr> -->
            </table>
            <table class="tbl-sn">
                <caption>侦听方法</caption>
                <tr>
                    <th>属性</th>
                    <th>说明</th>
                </tr>
                <tr>
                    <td>onCanplay(function listener)</td>
                    <td>监听音频进入可以播放状态的事件。但不保证后面可以流畅播放</td>
                </tr>
                <tr>
                    <td>onPlay(function listener)</td>
                    <td>监听音频播放事件</td>
                </tr>
                <tr>
                    <td>onPause(function listener)</td>
                    <td>监听音频暂停事件</td>
                </tr>
                <tr>
                    <td>onSeeked(function listener)</td>
                    <td>监听音频完成跳转事件</td>
                </tr>
                <tr>
                    <td>onStop(function listener)</td>
                    <td>监听音频停止事件</td>
                </tr>
                <tr>
                    <td>onEnded(function listener)</td>
                    <td>监听音频自然播放至结束的事件</td>
                </tr>
                <tr>
                    <td>onTimeUpdate(function listener)</td>
                    <td>监听音频播放进度更新事件</td>
                </tr>
                <tr>
                    <td>onError(function listener)</td>
                    <td>监听音频播放错误事件；如果错误，给出相应的错误代码</td>
                </tr>
            </table>
        </dd>
        <dd>
            <details>
                <summary>其它属性</summary>
                <div>epname：专辑名；分享出去的卡片简介将使用该值</div>
                <div>singer：歌手名；分享出去的卡片简介将使用该值</div>
                <div>coverImgUrl：封面图 URL，用于做原生音频播放器背景图；分享出去的卡片配图及背景将使用该图</div>
                <div>webUrl：页面链接；分享出去的卡片简介将使用该值</div>
            </details>
        </dd>
    </dl>
    <iframe src="../common/footer.html" frameborder="0" scrolling="no" title="footer" id="footer"></iframe>
</body>

</html>