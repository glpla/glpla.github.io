<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>2024-01</title>
  <style>
    @import url(../css/fonts_Quicksand.css);

    :root {
      --border-color: #ccc;
      --p-m-g: 10px;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-size: 15px;
      font-family: 'Quicksand', Arial, Helvetica, sans-serif;
    }

    #app {
      width: 100%;
      max-width: 1024px;
      margin: var(--p-m-g) auto;
    }

    .menu {
      position: fixed;
      left: var(--p-m-g);
      top: calc(2*var(--p-m-g));
      font-size: 14px;
    }

    .ham {
      position: relative;
      width: 32px;
      height: 20px;
      cursor: pointer;
    }

    .ham .line {
      position: absolute;
      left: 0;
      top: 50%;
      transform: translateY(-50%);
      width: 100%;
      height: 4px;
      background-color: #f40;
      transition: 0.2s ease-in-out;
    }

    .ham::before,
    .ham::after {
      content: '';
      position: absolute;
      left: 0;
      width: 100%;
      height: 4px;
      background-color: #f40;
      transition: 0.2s ease-in-out;
    }

    .ham::before {
      top: 0;
    }

    .ham::after {
      bottom: 0;
    }

    .ham.active .line {
      transform: scale(0);
    }

    .ham.active::before {
      top: 50%;
      transform: translateY(-50%) rotate(45deg);
    }

    .ham.active::after {
      bottom: 50%;
      transform: translateY(-50%) rotate(-45deg);
    }

    .nav {
      position: absolute;
      left: -100px;
      top: 30px;
      list-style: none;
      display: flex;
      flex-direction: column;
      gap: var(--p-m-g);
    }

    .nav.active {
      left: 0;
    }

    .nav-item {
      line-height: 2;
      padding: 0 var(--p-m-g);
      background-color: #efefef;
      transform: translateX(-100px);
      transition: 0.2s ease-in-out calc(var(--delay)*0.1s);
      cursor: pointer;
    }

    .nav-item:hover,
    .nav-item.active {
      color: #f40;
    }

    .nav.active .nav-item {
      transform: translateX(0px);
    }

    .title {
      font-size: 13px;
      text-align: center;
      line-height: 3;
      border-top: 2px solid var(--border-color);
      border-left: 2px solid var(--border-color);
      border-right: 2px solid var(--border-color);
    }

    .desc {
      display: flex;
      justify-content: space-around;
      border-top: 1px solid var(--border-color);
      border-left: 2px solid var(--border-color);
      border-right: 2px solid var(--border-color);
      line-height: 3;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      line-height: 2;
      border: 2px solid var(--border-color);
      border-top: 1px solid var(--border-color);
    }

    th,
    td {
      text-align: center;
      border: 1px solid var(--border-color);
      min-width: 30px;
    }

    .tips {
      text-align: left;
      padding: var(--p-m-g);
    }

    @media (max-width: 768px) {
      body {
        font-size: 11px;
      }

      th,
      td {
        min-width: 0;
      }
    }

    @media print {
      body {
        font-size: 11px;
      }

      .menu {
        display: none;
      }
    }
  </style>
</head>

<body>
  <div id="app">
    <nav class="menu" @click="toggleMenu">
      <div class="ham" :class="{'active':showMenu}">
        <div class="line"></div>
      </div>
      <ul class="nav" :class="{'active':showMenu}">
        <li class="nav-item" style="--delay:0">202301</li>
        <li class="nav-item" style="--delay:1">202302</li>
        <li class="nav-item" style="--delay:2">202101</li>
      </ul>
    </nav>
    <div class="cont">
      <header>
        <div class="title">广州新华学院 2024 - 2025 学年第 1 学期 xxx 课程平时成绩登记表</div>
        <div class="desc">
          <div>任课老师：张树彬</div>
          <div>任课班级：23级xxxx班</div>
          <div>开课单位：信息与智能工程学院</div>
        </div>
      </header>
      <table>
        <tr>
          <th rowspan="2">序号</th>
          <th rowspan="2">学号</th>
          <th rowspan="2">姓名</th>
          <th colspan="5">课堂考勤 30%</th>
          <th colspan="6">课程作业 60%</th>
          <th rowspan="2">平时表现 10%</th>
          <th rowspan="2">平时成绩</th>
        </tr>
        <tr>
          <td>出勤</td>
          <td>迟到</td>
          <td>请假</td>
          <td>缺勤</td>
          <td>早退</td>
          <td>1</td>
          <td>2</td>
          <td>3</td>
          <td>4</td>
          <td>5</td>
          <td>6</td>
        </tr>
        <tr v-for="(student,ind) in students">
          <td>{{ind+1}}</td>
          <td>{{student.id}}</td>
          <td>{{student.name}}</td>
          <td>{{student.clockin.present}}</td>
          <td>{{student.clockin.late}}</td>
          <td>{{student.clockin.leave}}</td>
          <td>{{student.clockin.absent}}</td>
          <td>{{student.clockin.early}}</td>
          <td hidden>{{clockinFn(student.clockin)}}</td>
          <td>{{student.homework.item0}}</td>
          <td>{{student.homework.item1}}</td>
          <td>{{student.homework.item2}}</td>
          <td>{{student.homework.item3}}</td>
          <td>{{student.homework.item4}}</td>
          <td>{{student.homework.item5}}</td>
          <td hidden>{{homeworkFn(student.homerwork)}}</td>
          <td>{{student.bonus}}</td>
          <td>{{gradeFn(student)}}</td>
        </tr>
        <tr>
          <td colspan="16" class="tips">
            <div>考勤说明：减分制；迟到-5；请假-10；缺勤-15；早退：-5</div>
          </td>
        </tr>
      </table>
    </div>
  </div>
  <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
  <script>
    const { createApp, ref, computed } = Vue
    createApp({
      setup() {
        const showMenu = ref(false)
        const toggleMenu = () => {
          showMenu.value = !showMenu.value
        }

        const students = ref([
          {
            "id": 20235481,
            "name": "张树彬",
            "clockin": {
              "present": 8,
              "late": 1,
              "leave": 1,
              "absent": 0,
              "early": 0
            },
            "homework": {
              "item0": 88,
              "item1": 85,
              "item2": 90,
              "item3": 88,
              "item4": 80,
              "item5": 86,
            },
            "bonus": 88,
          },
          {
            "id": 20235482,
            "name": "新华学霸",
            "clockin": {
              "present": 9,
              "late": 1,
              "leave": 0,
              "absent": 0,
              "early": 0
            },
            "homework": {
              "item0": 80,
              "item1": 85,
              "item2": 92,
              "item3": 85,
              "item4": 88,
              "item5": 85,
            },
            "bonus": 90,
          }
        ])

        const clockinFn = computed(() => {
          return (items) => {
            let sum = 100 - (items.late * 5 + items.leave * 10 + items.absent * 15 + items.early * 5)
            return sum
          }
        })

        const homeworkFn = computed(() => {
          return (items) => {
            let sum = 0
            for (item in items) {
              console.log(items[item]);
              sum += items[item]
            }
            return parseInt(sum / 6)
          }
        })

        const gradeFn = computed(() => {
          return (student) => {
            // clockin
            let clockin = 100 - (student.clockin.late * 5 + student.clockin.leave * 10 + student.clockin.absent * 15 + student.clockin.early * 5)
            // homerwork
            let homework = 0
            for (item in student.homework) {
              homework += student.homework[item]
            }
            // bonus
            let bonus = student.bonus
            console.log(clockin, homework / 6, bonus / 4);
            return parseInt(clockin * 0.3 + homework / 6 * 0.6 + bonus / 4 * 0.1)
          }
        })

        // const printCont = () => {
        //   console.log('print cont');
        //   window.print()
        // }

        return {
          showMenu,
          students,
          clockinFn,
          homeworkFn,
          gradeFn,
          // printCont
          toggleMenu
        }
      }
    }).mount('#app')</script>
</body>

</html>