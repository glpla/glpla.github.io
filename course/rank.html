<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>积分榜 Rank</title>
  <link rel="stylesheet" href="./css/rank.css">
</head>

<body>
  <div class="container" id="app">
    <nav>
      <div class="nav" :class="{active:isShow}" v-for="(item,ind) in navs" :key="item,url">
        <div class="nav-item">{{item.year}}</div>
        <div class="sub-nav">
          <div class="sub-nav-item" v-for="(item,ind) in item.major" :key="item.url" @click="getData(item.url)">
            {{item.grade}} {{item.major}}{{item.class}}班</div>
        </div>
      </div>
      <div class="logo">
        <span class='iconfont icon-line-medalxunzhang-02 logo-icon'></span>
        <span class="logo-title">积分榜<span class='iconfont icon-line-medalxunzhang-02'></span></span>
      </div>
    </nav>
    <div class="main">
      <div class="left"></div>
      <div class="cont">
        <div class="title">{{title}}</div>
        <div class="item" v-for="(item,ind) in rank.cont" :key="item">
          <div>{{item.usn}}</div>
          <img class='img' :src="`/utils${item.uavatar}`" alt="avatar">
          <span class='name'>{{item.uname}}</span>
          <div><span class='iconfont icon-star' v-for="star in item.ucredit"></span></div>
        </div>
      </div>
    </div>
    <footer>
      <h5>All Rights Reserved &copy; By Cnplaman 2022-2024</h5>
    </footer>
  </div>
  <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
  <script>
    const { createApp, ref, computed, onMounted } = Vue
    createApp({
      setup() {
        const navs = ref([{
          year: '2024秋季',
          major: [
            {
              name: '23软工',
              grade: '2023', major: '软工', class: 1,
              url: '20240201.json',
            },
            {
              name: '23软工',
              grade: '2023', major: '软工', class: 3,
              url: '20240202.json',
            },
            {
              name: '23数媒',
              grade: '2023', major: '数媒', class: 1,
              url: '20240203.json',
            },
            {
              name: '23数媒',
              grade: '2023', major: '数媒', class: 2,
              url: '20240204.json',
            },
            {
              name: '2023数媒',
              grade: '2023', major: '数媒', class: 3,
              url: '20240205.json',
            },
          ]
        },
        {
          year: '2024春季',
          major: [
            {
              name: '22软工',
              grade: '2022', major: '软工', class: 1,
              url: '202401.json',
            },
            {
              name: '22数媒',
              grade: '2022', major: '数媒', class: 1,
              url: '202402.json',
            },
          ]
        },
        {
          year: '2023秋季',
          major: [
            {
              name: '22软工',
              grade: '2022', major: '软工', class: 1,
              url: '202301.json'
            },
            {
              name: '23经济和语言',
              grade: '2023', major: '经济和语言', class: 1,
              url: '202302.json'
            },
            {
              name: '23服装',
              grade: '2023', major: '服装', class: 1,
              url: '202303.json'
            },
            {
              name: '23播音网络',
              grade: '2023', major: '播音网络', class: 1,
              url: '202304.json'
            }
          ]
        }
        ])
        const ind = ref(0)
        const isShow = ref(false)
        const title = ref('');
        const rank = ref([]);
        const getData = (url) => {
          fetch(`/utils/data/rank/${url}`)
            .then(res => res.json())
            .then(res => {
              console.log(res);
              rank.value = res;
              title.value = `${res.info.grade} ${res.info.major} ${res.info.class} ${res.info.course}`
            })
        }
        onMounted(() => {
        })
        return {
          ind,
          isShow,
          navs,
          title,
          rank,
          getData
        }
      }
    }).mount('#app')</script>
</body>

</html>