<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>响应式开发 Responsive</title>
  <link rel="stylesheet" href="../css/common.css">
  <base target="_blank">
</head>

<body>
  <header>
    <h1>&commat;Responsive</h1>
    <span class="ham iconfont icon-menu"></span>
    <nav class="nav">
      <a href="" class="nav-item">视口</a>
      <a href="" class="nav-item">响应式开发</a>
      <a href="" class="nav-item">媒体查询</a>
      <a href="" class="nav-item">实现</a>
      <a href="" class="nav-item">案例</a>
    </nav>
  </header>
  <dl>
    <dt>预备知识</dt>
    <dd>[<span class="iconfont icon-keyboard"></span>]获取视口大小-缩放浏览器、最大化、最小化，结果相应变化</dd>
    <dd>
      <pre>
let w = document.documentElement.clientWidth;
let h = document.documentElement.clientHeight;
console.log(w, h);</pre>
    </dd>
    <dd>[<span class="iconfont icon-keyboard"></span>]真机调试-移动端视口</dd>
    <dd>.开发环境中，切换为移动设备后，调试的视口大小和真机测试不一致</dd>
    <dd>.使用上述代码，在华为某真机上，微信扫码显示为宽高为400*745；浏览器输入地址查看为360*597[真机调试需要手机和电脑处于同一个WIFI内]</dd>
    <dd>
      .查看屏幕大小：真机上，微信扫码为400*867[宽度一致，高度不一致，是因为视口高度+上方的标题栏+下方的状态栏=屏幕宽度]；浏览器输入地址查看360*780[原理相同]；之所以微信扫码结果比浏览器宽度大，是因为浏览器有40px的滚动条；所以移动端开发，通常会指定最小宽度为320px
    </dd>
    <dd>
      <pre>
let sw = window.screen.width;
let sh = window.screen.height;</pre>
    </dd>
    <dd>移动端容器最小尺寸</dd>
    <dd>
      <pre>min-width: 320px;</pre>
    </dd>
  </dl>
  <div class="chap">视口</div>
  <dl class="nav-cont">
    <dd>.视口 viewpoint</dd>
    <dd>.约束&lt;html&gt;的大小</dd>
    <dd>.显示内容，和浏览器窗口大小一致；不包括底部的状态栏和顶部的菜单栏和地址栏</dd>
    <dd>
      <pre>&lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;</pre>
    </dd>
    <dd>
      <table>
        <tr>
          <th>类别</th>
          <th>说明</th>
        </tr>
        <tr>
          <td>width</td>
          <td>视口宽度</td>
        </tr>
        <tr>
          <td>initial-scale</td>
          <td>初始缩放比例，默认1</td>
        </tr>
        <tr>
          <td>minmum-scale</td>
          <td>最小缩放比例</td>
        </tr>
        <tr>
          <td>maxmum-scale</td>
          <td>最大缩放比例</td>
        </tr>
        <tr>
          <td>user-scalable</td>
          <td>是否缩放yes[默认]|no</td>
        </tr>
      </table>
    </dd>
    <dd>.是苹果公司为了解决移动端浏览器的页面渲染而提出的方案，后来被其它移动设备公司采用，即：<span class="warn">浏览器的宽度=设备屏幕的宽度</span></dd>
    <dd>.通常只使用前面两个属性</dd>
    <dd>.用户缩放行为：微信扫码响应，QQ浏览器不响应；无论是否允许缩放，都能缩放[流氓浏览器]</dd>
    <dd>.width指浏览器的屏幕宽度；通常认为和设备宽度保持一致，不做区分，特别是移动端[你在移动端对浏览器进行过最大最小化操作吗？]</dd>
    <dd>.device-width指设备屏幕的宽度，对于特定的设备，宽度是固定的</dd>
    <dd>.如果修改视口大小为300，则真机调试的结果也为300，所以默认情况下，设置浏览器的宽度等于设备屏幕的宽度</dd>
    <dd>
      <pre>&lt;meta name="viewport" content="width=300, initial-scale=1.0"&gt;</pre>
    </dd>
  </dl>
  <div class="chap">响应式开发</div>
  <dl class="nav-cont">
    <dd>.移动优先：优先按照移动端来设计/默认样式优先满足移动端</dd>
    <dd>.固定布局 px</dd>
    <dd>.百分比布局 %</dd>
    <dd>.流式布局 float</dd>
    <dd>.栅格化布局 %</dd>
    <dd>.根布局 REM</dd>
    <dd>.弹性盒子布局 flex</dd>
    <dd>.网格布局 grid</dd>
    <dd>.响应式布局：媒体查询 Media Query；通过根据检测到的设备信息，通常是宽度，来决定采用什么布局方式</dd>
    <dd>[<span class="iconfont icon-bell"></span>]通常综合运用不同的布局方式进行开发</dd>
    <dd>[<span class="iconfont icon-bell"></span>]代码有冗余，影响性能</dd>
    <dd class="example-sn">响应式版心</dd>
    <dd>方案1：使用max-width</dd>
    <dd>
      <pre>
main {
  width: calc(100% - 1rem);
  max-width: 800px;
  margin: 0 auto;
}</pre>
    </dd>
    <dd>方案2：使用min()函数</dd>
    <dd>
      <pre>
main {
  width: min(800px, 100% - 1rem);
  margin: 0 auto;
}</pre>
    </dd>
    <dd>[<span class="iconfont icon-keyboard"></span>]设置字体大小</dd>
    <dd>方案1：静态设置 - 为方便计算，通常设置html字体大小为62.5%：1rem=10px</dd>
    <dd>
      <pre>
html {
    //font-size: 10px;
    font-size: 62.5%;
    scroll-behavior: smooth;
}</pre>
    </dd>
    <dd>方案2：动态设置 - 根据视口宽度设置字体大小</dd>
    <dd>超过750，按750计算；小于320，按320计算</dd>
    <dd>放在脚本放在&lt;header&gt;，优先处理</dd>
    <dd>
      <pre>
function rem() {
  let dw = document.documentElement.clientWidth || window.innerWidth
  if (dw >= 750) {
    dw = 750
  }
  if (dw &lt;= 320) {
    dw = 320
  }
  console.log('dw', dw);
  // 1rem=100px
  document.documentElement.style.fontSize = (dw / 7.5) + 'px'
}
rem()
window.onresize = function () {
  rem()
}</pre>
    </dd>
    <dd>方案3：详情查看 <a href="./js/bom.html">BOM</a></dd>
  </dl>
  <div class="chap">媒体查询 Media Query</div>
  <dl class="nav-cont">
    <dt>需求背景</dt>
    <dd>.应用场合不同：all所有设备、screen屏幕、print打印、speech屏幕阅读器/发声设备等；默认是屏幕screen</dd>
    <dd>.移动端和桌面端屏幕的尺寸不同</dd>
    <dd>.在&lt;head&gt;引入视口viewport；VS Code默认html页面已提供；其它开发环境注意确认是否有</dd>
    <dd>
      <pre>&lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;</pre>
    </dd>
    <dt>断点 breakpoint</dt>
    <dd>.利用断点 breakpoint划分尺寸</dd>
    <dd>.尺寸断点 breakpoint 应以实际内容为主，如根据导航条灵活指定</dd>
    <dd>.通常以Ipnone6（375*667）为标准进行设计图的设计</dd>
    <dd>
      <table>
        <tr>
          <th>类别</th>
          <th>说明</th>
          <th>备注</th>
        </tr>
        <tr>
          <td>large</td>
          <td>>1200</td>
        </tr>
        <tr>
          <td>normal</td>
          <td>&lt;1200</td>
          <td>iPad横版 1024*768</td>
        </tr>
        <tr>
          <td>medium</td>
          <td>&lt;992</td>
          <td>iPad竖版 768*1024</td>
        </tr>
        <tr>
          <td>small</td>
          <td>&lt;768</td>
          <td>iPhone6/7/8 375*667 iPhoneX 375*812</td>
        </tr>
        <tr>
          <td>tiny</td>
          <td>&lt;576</td>
        </tr>
      </table>
    </dd>
    <dt>语法</dt>
    <dd>.通常根据尺寸响应；还可以根据比例响应aspect-ratio，不过使用较少</dd>
    <dd>.max-width：尺寸小于或等于当前值时，应用样式</dd>
    <dd>.min-width：尺寸大于或等于当前值时，应用样式</dd>
    <dd>.使用关键字确定区间range：AND、NOT、ONLY等；关键字两端需要空格同其它分隔开来</dd>
    <dd>.使用关系运算符：&lt;=、&gt;=等等；可读性更好；请在Can I Use查看media query中范围range的支持情况</dd>
    <dt>桌面端优先</dt>
    <dd>.使用max-width时，从默认的大尺寸向小尺寸过渡</dd>
    <dd>
      <pre>
//默认是大尺寸 large... ...

//normal... ...
@media screen and (max-width: 1200px) {
}

//medium... ...
@media screen and (max-width: 992px) {
}

//small... ...
@media screen and (max-width: 768px) {
}</pre>
    </dd>
    <dt>移动端优先</dt>
    <dd>.使用min-width时，从默认的小尺寸向大尺寸过渡</dd>
    <dd>
      <pre>
//默认是小尺寸 small... ...

//normal... ...
@media screen and (min-width:768px) {
}

//medium... ...
@media screen and (min-width:992px) {
}

//large... ...
@media screen and (min-width:1200px) {
}

//2K - 2048x1152 2048x1536
@media screen and (min-width:2048px) {
}
</pre>
    </dd>
    <dt>其他使用</dt>
    <dd>
      <pre>
//使用关键字
@media screen AND (min-width:768px) AND (max-width:992px) {

}

//使用关系运算符；省略screen
@media (width&lt;=768px) {
  body {
    background-color: #f40;
  }
}

//使用比例-较少使用
@media (min-aspect-ratio:1/1) {
  body {
    background-color: #f40;
  }
}

@media (min-aspect-ratio:16/9) {
  body {
    background-color: #890;
  }
}</pre>
    </dd>
    <dd class="tips">
      <div>.xxx-device-width和xxx-width不一样；对桌面端而言[不开启toggl device选项]，设备宽度是固定的，并不会响应媒体查询</div>
      <div>.开发者视图中，切换设备时，改变的就是对应设备的设备宽度；不切换设备，改变的是浏览器的宽度</div>
    </dd>
  </dl>
  <div class="chap">实现 Implementation</div>
  <dl class="nav-cont">
    <dt>外部样式</dt>
    <dd>. 在HTML中根据媒体尺寸动态引入link对应的外部CSS文件</dd>
    <dd>
      <pre>
&lt;link rel="stylesheet" media="screen and (min-width:1201px)" href="./media_large.css"&gt;
&lt;link rel="stylesheet" media="screen and (max-width:1200px)" href="./media_medium.css"&gt;
&lt;link rel="stylesheet" media="screen and (max-width:992px)" href="./media_normal.css"&gt;
&lt;link rel="stylesheet" media="screen and (max-width:768px)" href="./media_small.css"&gt;</pre>
    </dd>
    <dd>. 在主样式文件app.css引入响应的CSS文件</dd>
    <dd>
      <pre>
@import url(./css/media_large.css);
@import url(./css/media_medium.css) only screen and (max-width:1200px);
@import url(./css/media_normal.css) only screen and (max-width:992px);
@import url(./css/media_small.css) only screen and (max-width:768px);</pre>
    </dd>
    <dt>内部样式</dt>
    <dd>. 根据媒体尺寸在&lt;style&gt;直接编辑内部样式；多见于练习</dd>
    <dd>
      <pre>
&lt;style&gt;
  body {
    background-color: #f2f3f4;
  }

  @media screen and (max-width: 1200px) {
    body {
      background-color: #908;
    }
  }

  @media screen and (max-width: 992px) {
    body {
      background-color: #890;
    }
  }

  @media screen and (max-width: 768px) {
    body {
      background-color: #f40;
    }
  }
&lt;/style&gt;</pre>
    </dd>
    <dd>. 根据媒体尺寸在不同的&lt;style&gt;编辑内部样式；使用不多</dd>
    <dd>
      <pre>
&lt;style&gt;
  body {
    background-color: #f2f3f3;
  }
&lt;/style&gt;

&lt;style media="(max-width:1200px)"&gt;
  body {
    background-color: #908;
  }
&lt;/style&gt;

&lt;style media="(max-width:992px)"&gt;
  body {
    background-color: #890;
  }
&lt;/style&gt;

&lt;style media="(max-width:768px)"&gt;
  body {
    background-color: #f40;
  }
&lt;/style&gt;</pre>
    </dd>
  </dl>
  <div class="chap">案例 Cases</div>
  <dl class="nav-cont">
    <dd class="mt2">[<span class="iconfont icon-keyboard"></span>] 画廊</dd>
    <dd>.内部样式</dd>
    <dd>.默认是大屏，>1200px，显式4列</dd>
    <dd>.&le;1200px，显式3列</dd>
    <dd>.&le;992px，显式2列</dd>
    <dd>.&le;768px，显式1列</dd>
    <dd>
      <pre>
&lt;div class="wrap"&gt;
  &lt;img src="./imgs/1.jpg" alt=""&gt;
  &lt;img src="./imgs/2.jpg" alt=""&gt;
  &lt;img src="./imgs/3.jpg" alt=""&gt;
  &lt;img src="./imgs/4.jpg" alt=""&gt;
  &lt;img src="./imgs/5.jpg" alt=""&gt;
  &lt;img src="./imgs/6.jpg" alt=""&gt;
&lt;/div&gt;</pre>
    </dd>
    <dd>
      <p>方案1：使用grid实现 - 桌面优先</p>
      <pre>
.wrap {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 1rem;
}

@media screen and (max-width: 1200px) {
  .wrap {
    grid-template-columns: repeat(3, 1fr);
  }
}

@media screen and (max-width: 992px) {
  .wrap {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media screen and (max-width: 768px) {
  .wrap {
    grid-template-columns: repeat(1, 1fr);
  }
}</pre>
      <p>方案 2：使用%实现 - 移动优先；采用了float，记得清楚浮动</p>
      <pre>
.wrap img {
  float: left;
  width: 100%;
  aspect-ratio: 16/9;
}

@media (min-width:768px) {
  .wrap img {
    width: 50%;
  }
}

@media (min-width:992px) {
  .wrap img {
    width: 33.3%;
  }
}

@media (min-width:1200px) {
  .wrap img {
    width: 25%;
  }
}      </pre>
    </dd>
    <dd>其它方案：请参考grid万能的自适应布局<a href="./grid.html#grid">gird布局</a></dd>
    <dd class="mt2">[<span class="iconfont icon-keyboard"></span>] 汉堡菜单</dd>
    <dd>. 主导航nav、logo、和ham</dd>
    <dd>. 传统方式下：大尺寸下，只显示nav和logo，隐藏掉ham；小尺寸时，再显示ham</dd>
    <dd>.
      改进：大尺寸下，ham的h5指定结构但是内容为空，小尺寸下才设计ham的具体内容，这样就不需要先隐藏再显示。适合开始弹性布局的flex-start和结束flex-end；如果使用space-between则0元素也会被分隔
      [好大的坑！！！]</dd>
  </dl>
  <iframe src="../../common/footer.html" frameborder="0" scrolling="no" title="footer" id="footer"></iframe>
  <script src="./lib/ham.js"></script>
</body>

</html>