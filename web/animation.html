<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>帧动画 Animation</title>
  <link rel="stylesheet" href="./css/styleNew.css">
  <link rel="stylesheet" href="./css/ani.css">
  <link rel="stylesheet" href="../css/sn.css">
  <link rel="stylesheet" href="../css/code.css">
  <link rel="stylesheet" href="style.css">
  <base target="_blank">
  <style>
    :root {
      --ani: null;
    }
  </style>
</head>

<body>
  <header>
    <h1>&commat;Animation</h1>
    <span class="ham iconfont icon-menu"></span>
    <nav class="nav">
      <a href="" class="nav-item">Overview</a>
      <a href="" class="nav-item">Cases</a>
      <a href="" class="nav-item">steps</a>
      <a href="" class="nav-item">Events</a>
    </nav>
  </header>
  <dl>
    <dt class="nav-cont">概述 Overview</dt>
    <dd>.使用关键字@keyframes定义诺干个关键帧来表示元素的状态；从一个关键帧到另外一个关键帧的过渡时，中间的状态由系统自动生成</dd>
    <dd>.皮影戏和早期非常流行的flash动画也是采用关键帧实现</dd>
    <dd>.帧动画可以作用于多个元素；过渡动画transition只能作用于当前元素</dd>
    <dd>.可以平滑方式；也可以步进方式</dd>
    <dd>.更多高级动画，请访问<a href="./framework/animate.html">Animate使用</a>、<a
        href="http://www.animate.net.cn/">Animate官方动画库</a>
    </dd>
    <dt>定义动画 Definition</dt>
    <dd>.利用关键字from和to；通常省略from，表示从当前状态开始</dd>
    <dd>.关键字只能定义2个状态</dd>
    <dd>
      <figure class="code">
        <figcaption>关键字定义</figcaption>
        <pre>
@keyframes ani_name {
    from {
    }

    to {
    }
}</pre>
      </figure>
    </dd>
    <dd>.利用百分比：可以定义多个百分比节点/状态，动画效果更为灵活细腻</dd>
    <dd>
      <figure class="code">
        <figcaption>百分比定义</figcaption>
        <pre>
@keyframes ani_name {
    0% {      
    }

    50% {      
    }

    100% {      
    }
}</pre>
      </figure>
    </dd>
    <dt>使用动画 Usage</dt>
    <dd>.可以使用复合属性语法；也可以使用单独属性语法</dd>
    <dd>
      <figure class="code">
        <figcaption>复合属性语法</figcaption>
        <pre>animation: name duration timing-function delay iteration-count direction fill-mode;</pre>
      </figure>
    </dd>
    <dd>
      <figure class="code">
        <figcaption>单独属性语法</figcaption>
        <pre>
animation-name:
animation-duration:
animation-timing-function:
animation-delay:
animation-iteration-count:
animation-direction:
animation-fill-mode:</pre>
      </figure>
    </dd>
    <dd>
      <table class="tbl-sn">
        <caption>动画属性</caption>
        <tr>
          <th style="width: 30%;">类别</th>
          <th>说明</th>
        </tr>
        <tr>
          <td>name</td>
          <td>动画名称</td>
        </tr>
        <tr>
          <td>duration</td>
          <td>动画持续时间；单位秒s或毫秒ms</td>
        </tr>
        <tr>
          <td>timing-function</td>
          <td>动画方式；见下表</td>
        </tr>
        <tr>
          <td>delay</td>
          <td>动画延迟时间，必须是第2个时间参数</td>
        </tr>
        <tr>
          <td>iteration-count</td>
          <td>动画播放次数</td>
        </tr>
        <tr>
          <td>direction</td>
          <td>动画方向；reverse | alternate-reverse</td>
        </tr>
        <tr>
          <td>fill-mode</td>
          <td>动画结束模式；forward表示100%</td>
        </tr>
        <tr>
          <td>animation-play-state</td>
          <td>动画状态；paused | played</td>
        </tr>
      </table>
    </dd>
    <dd>
      <table class="tbl-sn">
        <caption>动画方式 animation-timing-function</caption>
        <tr>
          <th style="width: 30%;">类别</th>
          <th>说明</th>
        </tr>
        <tr>
          <td>ease</td>
          <td>默认。动画以低速开始，然后加快，在结束前变慢</td>
        </tr>
        <tr>
          <td>linear</td>
          <td>动画从头到尾的速度是相同的</td>
        </tr>
        <tr>
          <td>ease-in</td>
          <td>动画以低速开始</td>
        </tr>
        <tr>
          <td>ease-out</td>
          <td>动画以低速结束</td>
        </tr>
        <tr>
          <td>ease-in-out</td>
          <td>动画以低速开始和结束</td>
        </tr>
        <tr>
          <td>cubic-bezier(n,n,n,n)</td>
          <td>使用 cubic-bezier 函数定义过程</td>
        </tr>
      </table>
    </dd>
    <dt>其他说明</dt>
    <dd>.如果没有显式的指定结束状态为100%，则默认返回起始状态</dd>
    <dd>
      <figure class="code">
        <figcaption>默认返回</figcaption>
        <pre>
@keyframes blink {
  50% {
    color: #000;
  }
}</pre>
      </figure>
    </dd>
    <dd>.多个动画使用,分隔，可以分别指定某个动画的属性</dd>
    <dd>.先播放第一个动画roll，接着播放第二个动画zoom，然后一直循环播放第二个动画</dd>
    <dd>
      <figure class="code">
        <figcaption>多动画使用</figcaption>
        <pre>
animation: 
    roll 2s ease,
    zoom 2s 2s ease infinite alternate;</pre>
      </figure>
    </dd>
    <dd>.先播放第一个动画roll，接着播放第二个动画zoom，最后一直循环播放第一个动画</dd>
    <dd>
      <figure class="code">
        <figcaption>多动画使用</figcaption>
        <pre>
animation: 
    roll 2s ease infinite alternate,
    zoom 2s 2s ease;</pre>
      </figure>
    </dd>
  </dl>
  <div class="chap">案例 Cases</div>
  <dl class="nav-cont">
    <dd>[<span class="iconfont icon-keyboard"></span>] 骨架屏 - 扫光</dd>
    <dd class="mt2">[<span class="iconfont icon-keyboard"></span>] <a href="./demo/up2u.html#msg"><a
          href="https://codepen.io/glpla/full/QWYoLPK">获取焦点focus时重复播放动画 - CodePen</a></a>
    </dd>
    <dd>.帧动画 keyframe</dd>
    <dd>.过渡动画 transition</dd>
    <dd>.定位</dd>
    <dd>.获取焦点选择器 :focus</dd>
    <dd>.数据有效选择器 :focus</dd>
    <dd class="mt2">[<span class="iconfont icon-keyboard"></span>] <a href="https://codepen.io/glpla/full/xxMBKdP">text
        - CodePen</a></dd>
    <dd>.帧动画 animation</dd>
    <dd>.内联变量 --val</dd>
    <dd>.取值函数 var()</dd>
    <dd class="mt2">[<span class="iconfont icon-keyboard"></span>] <a href="https://codepen.io/glpla/full/MWLLNvM">wave
        - CodePen</a></dd>
    <dd>.使用弹性盒子 flex或定位</dd>
    <dd>.帧动画 animation</dd>
    <dd>.内联变量 --val</dd>
    <dd>.取值函数 var()</dd>
    <dd>.变换 transform</dd>
    <dd>.滤镜 filter</dd>
    <dd class="mt2">[<span class="iconfont icon-keyboard"></span>] <a
        href="https://codepen.io/glpla/full/PoVVMda">loading - CodePen</a></dd>
    <dd>.通过旋转若干子元素，并设置子元素的某个伪元素达到圆周分布的效果</dd>
    <dd>.帧动画 animation</dd>
    <dd>.内联变量 --val</dd>
    <dd>.取值函数 var()</dd>
    <dd>.变换 transform</dd>
    <dd>.滤镜 filter</dd>
    <dd class="mt2">[<span class="iconfont icon-keyboard"></span>] <a href="https://codepen.io/glpla/full/oNmOjzQ">科技环 -
        CodePen</a></dd>
    <dd>.border</dd>
    <dd>.border-radius</dd>
    <dd>.transform</dd>
    <dd class="mt2">[<span class="iconfont icon-keyboard"></span>] <a href="./experiment/pro0.html">背景变换</a></dd>
    <dd>.帧动画 animation</dd>
    <dd>.滤镜 filter</dd>
    <dd class="mt2">[<span class="iconfont icon-keyboard"></span>] 输入非数字时，边框抖动提示用户输入非法</dd>
    <dd>
      <input class="shaking-ipt" type="text" pattern="[0-9]*" placeholder="your age with number">
    </dd>
    <dd>
      <figure class="code">
        <figcaption></figcaption>
        <pre>
.shaking-ipt:invalid {
    color: #f40;
    animation: shaking .1s ease-in-out 3;
    box-shadow: 0 0 2px #f40;
}

@keyframes shaking {
    0% {
        margin-left: 0;
    }

    25% {
        margin-left: 4px;
    }

    75% {
        margin-left: -4px;
    }

    75% {
        margin-left: 0px;
    }
}</pre>
      </figure>
    </dd>
    <dd class="mt2">[<span class="iconfont icon-keyboard"></span>] 进度条平滑缩放</dd>
    <dd class="basic">
      <div class="progress-scale"></div>
    </dd>
    <dd>
      <figure class="code">
        <figcaption></figcaption>
        <pre>
.progress-scale{
    animation: progress-ani 10s linear alternate infinite;
}    </pre>
      </figure>
    </dd>
    <dd class="mt2">[<span class="iconfont icon-keyboard"></span>] 鼠标hover时触发动画；使用上例同一个动画样式</dd>
    <dd class="basic">
      <div class="progress-hover"></div>
    </dd>
    <dd>
      <figure class="code">
        <figcaption></figcaption>
        <pre>
.progress-hover {
    width: 0;
    height: 1rem;
    border-radius: 1rem;
    background-color: #eb2f06;
    animation-name: progress-ani;
    animation-duration: 10s;
    animation-timing-function: linear;
    animation-play-state: paused;
    animation-direction: alternate;
    animation-iteration-count: infinite;
}

.basic:hover .progress-hover {
    animation-play-state: running;
}</pre>
      </figure>
    </dd>
    <dd class="mt2">[<span class="iconfont icon-keyboard"></span>] 传送带</dd>
    <dd class="tx-box">
      <div class="tx">
        <div class="tx-shadow"></div>
      </div>
    </dd>
  </dl>
  <div class="chap">步进帧动画 steps()</div>
  <dl class="nav-cont">
    <dt>说明</dt>
    <dd>.动画方式还可以按照指定的阶段数steps逐步完成</dd>
    <dd>.由时间函数 steps()指定分段过渡效果</dd>
    <dd>.同过渡动画 transition</dd>
    <dd>
      <figure class="code">
        <figcaption>语法</figcaption>
        <pre>steps(number_of_steps，direction)</pre>
      </figure>
    </dd>
    <dd>number_of_steps：数字，过渡分几个阶段完成</dd>
    <dd>direction：start和end，默认是end，指每个阶段过渡结束后才渲染；start则是过渡开始前就渲染</dd>
    <dd class="mt2">[<span class="iconfont icon-keyboard"></span>] 进度条分段过渡；使用前例动画样式 loading-ani</dd>
    <dd>1. steps(10)使用默认end</dd>
    <div class="progress-step step-default"></div>
    <dd>
      <figure class="code">
        <figcaption></figcaption>
        <pre>
.progress-step {
    width: 0;
    height: 1rem;
    border-radius: 1rem;
    background-color: #eb2f06;
    animation: progress-ani 10s steps(10) forwards;
}</pre>
      </figure>
    </dd>
    <dd>2. steps(10)使用start</dd>
    <div class="progress-step step-start"></div>
    <dd>
      <figure class="code">
        <figcaption></figcaption>
        <pre>
.progress-step {
    width: 0;
    height: 1rem;
    border-radius: 1rem;
    background-color: #eb2f06;
    animation: progress-ani 10s steps(10, start) forwards;
}</pre>
      </figure>
    </dd>
    <dd class="mt2">[<span class="iconfont icon-keyboard"></span>] <a
        href="https://codepen.io/glpla/full/oNVjXLE">typing - CodePen</a></dd>
    <dd>.字体等宽</dd>
    <dd>.步进动画steps()</dd>
    <dd>.多动画使用：移位动画和闪烁动画</dd>
    <dd>.重复动画infinite</dd>
    <dd>.动画延迟animation-delay</dd>
    <dd class="tips">
      <div>动画infinite时，最后一个字符会被忽略</div>
      <div>动画forwards时，最后一个字符会显示</div>
    </dd>
    <dd class="mt2">[<span class="iconfont icon-keyboard"></span>] 轮播图swiper</dd>
    <dd class="swiper-box">
      <div class="swiper">
        <div class="swiper-item"></div>
        <div class="swiper-item"></div>
        <div class="swiper-item"></div>
        <div class="swiper-item"></div>
        <div class="swiper-item"></div>
      </div>
    </dd>
    <dd>
      <figure class="code">
        <figcaption>[HTML]</figcaption>
        <pre>
&lt;div class="swiper-box"&gt;
    &lt;div class="swiper"&gt;
        &lt;div class="swiper-item"&gt;&lt;/div&gt;
        &lt;div class="swiper-item"&gt;&lt;/div&gt;
        &lt;div class="swiper-item"&gt;&lt;/div&gt;
        &lt;div class="swiper-item"&gt;&lt;/div&gt;
        &lt;div class="swiper-item"&gt;&lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;</pre>
      </figure>
    </dd>
    <dd>
      <figure class="code">
        <figcaption>[CSS] 采用步进steps逐步设置swiper的左侧位置</figcaption>
        <pre>
.swiper {
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    display: flex;
    flex-wrap: nowrap;
    animation: swiper 10s steps(5) infinite;
}

@keyframes swiper {
    to {
        left: -500%;
    }
}</pre>
      </figure>
    </dd>
  </dl>
  <div class="chap">动画事件 Events</div>
  <dl class="nav-cont">
    <dd>.可以使用JS控制动画的每个属性</dd>
    <dd>
      <table class="tbl-sn">
        <caption>动画事件</caption>
        <tr>
          <th>类别</th>
          <th>说明</th>
        </tr>
        <tr>
          <td>开始</td>
          <td>animationstart </td>
        </tr>
        <tr>
          <td>结束</td>
          <td>animationend</td>
        </tr>
        <tr>
          <td>重新播放</td>
          <td>animationiteration</td>
        </tr>
      </table>
    </dd>
    <dd>[<span class="iconfont icon-keyboard"></span>] <a href="./demo/loading.html">个人网站加载</a></dd>
    <dd>.页面加载完毕跳转到主页面</dd>
    <dd>.先设计动画并应用到某元素，然后在js中监测元素的动画状态，结束时跳转到主页面</dd>
    <dd>
      <figure class="code">
        <figcaption>加载跳转</figcaption>
        <pre>
let item = document.querySelector('.item')
item.addEventListener('animationend', () => {
  location.href = './index.html'
})        </pre>
      </figure>
    </dd>
    <dd>[<span class="iconfont icon-keyboard"></span>] <a href="./demo/miniplayer.html">MINI音乐播放器</a></dd>
    <dd>一开始动画暂停，监听播放状态。播放就执行动画；否则暂停</dd>
    <dd>
      <figure class="code">
        <figcaption>监听播放状态</figcaption>
        <pre>
audio.addEventListener('play', () => {
  img.style.animationPlayState = `running`
})
audio.addEventListener('pause', () => {
  img.style.animationPlayState = `paused`
})        </pre>
      </figure>
    </dd>
    <dd>[<span class="iconfont icon-keyboard"></span>] <a href="https://codepen.io/glpla/full/GRzeprJ">字节跳动</a> - C<i
        class="iconfont icon-codepen1"></i>depen</dd>
    <dd>.每次鼠标滑过都触发3次动画</dd>
    <dd class="mt2">[<span class="iconfont icon-keyboard"></span>] 单击后左移2次，结束后移除事件响应</dd>
    <dd>.事先应创建好动画样式</dd>
    <dd>
      <button type="button" class="btn">click me</button>
    </dd>
    <dd>
      <figure class="code">
        <figcaption>动画控制</figcaption>
        <pre>
let btn = document.querySelector('.btn');
btn.addEventListener('click', () => {
    btn.style.animation = 'moveOut 1s 2 forwards'
})
btn.addEventListener('animationend', () => {
    btn.style.pointerEvents = 'none'
})
btn.addEventListener('animationiteration', logging)
function logging() {
    console.log('animationiteration');
}</pre>
      </figure>
    </dd>
  </dl>
  <div class="chap">总结与作业 Summary & Homework</div>
  <dl>
    <dt>总结</dt>
    <dd class="ol">
      <div>帧动画的静态使用</div>
      <div>帧动画的js使用</div>
    </dd>
    <dt>作业</dt>
    <dd class="ol">
      <div>独立完成上述案例</div>
      <div>合理设计帧动画，完善个人网站</div>
    </dd>
  </dl>
  <iframe src="../../common/Html.html" frameborder="0" scrolling="no" title="html" id="html"
    onload="this.height=this.contentDocument.body.scrollHeight"></iframe>
  <iframe src="../../common/footer.html" frameborder="0" scrolling="no" title="footer" id="footer"></iframe>
  <script src="./lib/ham.js"></script>
  <script src="./lib/ani.js"></script>
</body>

</html>