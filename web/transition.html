<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>过渡动画 Transition</title>
  <link rel="stylesheet" href="../css/common.css">
  <link rel="stylesheet" href="./css/transition.css">
  <base target="_blank">
</head>

<body>
  <header>
    <h1>过渡动画</h1>
    <span>&commat;Transition</span>
    <span class="iconfont icon-menu ham"></span>
    <nav class="nav">
      <a href="" class="nav-item">概述 Overview</a>
      <a href="" class="nav-item">案例 Cases</a>
      <a href="" class="nav-item">步进 Steps</a>
      <a href="" class="nav-item">事件 Events</a>
    </nav>
  </header>
  <dl class="nav-cont">
    <dt>概述 Overview</dt>
    <dd>
      <div>元素从一个状态过渡到另外一个状态 - define the transition between two states of an element，包括过渡的2个状态、过渡的时间、过渡的方式、是否延迟等属性</div>
      <div>状态过渡需要一个触发条件，通常是鼠标悬停hover；也可以通过添加类的方式实现</div>
      <div>只能定义2个状态：开始状态、结束状态；如果需要多个状态呈现变化过程，请使用帧动画</div>
      <div>只适用于 <span class="warn">数值</span> 状态</div>
      <div>状态可以是一个属性，也可以是多个属性；多个属性的过渡可以使用 <span class="warn">逗号,</span> 分隔 - separated by commas</div>
      <div>只能作用于当前元素；如果多个元素使用，请使用帧动画</div>
      <div>桌面端使用较多；移动端使用少</div>
      <div>更多细节，请参考 <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/transition">MDN - transition</a>、<a
          href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_transitions/Using_CSS_transitions">Using_CSS_transitions</a>
      </div>
      <div>1. 复合属性 shorthand</div>
      <pre>transition: property duration timing-function delay;</pre>
      <div>2. 单独属性 longhand</div>
      <pre>
transition-property:
transition-duration:
transition-timing-function:
transition-delay:</pre>
      <table>
        <caption>过渡属性</caption>
        <tr>
          <th style="width: 30%;">类别</th>
          <th>说明</th>
        </tr>
        <tr>
          <td>property</td>
          <td>元素参与过渡的属性，必须是 <span class="warn">数值型</span> 的属性
            <br>通常指定为 all；<span class="warn">建议</span> 指定为特定属性
          </td>
        </tr>
        <tr>
          <td>duration</td>
          <td>过渡持续时间，单位秒 s 或毫秒 ms，必选参数，且必须是第一个时间参数；第二个时间参数是延迟时间
            <br>UI界面的过渡通常不超过 0.4s
          </td>
        </tr>
        <tr>
          <td>timing-function</td>
          <td>时间函数，过渡的效果/方式
            <br>默认是 ease
          </td>
        </tr>
        <tr>
          <td>delay</td>
          <td>过渡延迟时间，必须是第二个时间参数；第一个时间参数是过渡时间</td>
        </tr>
      </table>
      <table>
        <caption>时间函数 timing-function</caption>
        <tr>
          <th style="width: 30%;">类别</th>
          <th>说明</th>
        </tr>
        <tr>
          <td>linear</td>
          <td>以相同速度开始到结束（ cubic-bezier(0, 0, 1, 1) ）</td>
        </tr>
        <tr>
          <td class="warn">ease</td>
          <td>默认；开始慢，然后快，慢下来，结束时非常慢（ cubic-bezier(0.25, 0.1, 0.25, 1)）</td>
        </tr>
        <tr>
          <td>ease-in</td>
          <td>开始慢，结束快（ cubic-bezier(0.42,0,1,1)</td>
        </tr>
        <tr>
          <td>ease-out</td>
          <td>开始快，结束慢（ cubic-bezier(0,0,0.58,1)</td>
        </tr>
        <tr>
          <td>ease-in-out</td>
          <td>中间快，两边慢（ cubic-bezier(0.42,0,0.58,1)</td>
        </tr>
        <tr>
          <td>cubic-bezier(n,n,n,n)</td>
          <td>在 cubic-bezier 函数中定义自己的值</td>
        </tr>
      </table>
      <div>1. 默认所有属性过渡</div>
      <pre>
.demo {
  background-color: #ccc;
  transition: 1s;
}

.demo:hover {
  background-color: #f40;
}</pre>
      <div>2. 指定属性过渡 - 建议</div>
      <pre>
.demo {
  background-color: #ccc;
  transition: background-color 1s;
}

.demo:hover {
  background-color: #f40;
}</pre>
      <div>3. 分别指定不同阶段过渡</div>
      <pre>
.demo {
  background-color: #ccc;
  transition: background-color 1s;
}

.demo:hover {
  background-color: #f40;
  transition: background-color 3s;
}</pre>
      <div>4. 多个属性分别过渡</div>
      <pre>
.demo {
  background-color: #ccc;
  font-size: 16px;
  transition: background-color 1s, font-size 1s;
}

.demo:hover {
  background-color: #f40;
  font-size: 20px;
  transition: background-color 1s, font-size 1s;
}</pre>
      <div>5. 多个属性带延迟分别过渡</div>
      <pre>
.demo {
  background-color: #ccc;
  font-size: 16px;
  transition: background-color 1s, font-size 1s;
}

.demo:hover {
  background-color: #f40;
  font-size: 20px;
  transition: background-color 1s, font-size 1s 1s;
}</pre>
    </dd>
    <dd class="tips">
      <div>过渡大多数情况下写在开始状态，也可以写在结束状态，还可以在两个状态中分别指定过渡：配合不同的时间，实现特定的效果，如快进慢退</div>
      <div>过渡自动双向执行：只要状态翻转，过渡就会执行；为了避免这种情况，在结束态指定过渡</div>
      <div>多级元素使用过渡时，可能导致页面渲染延迟，调整过渡到结束状态即可</div>
      <div>使用单独属性语法可以指定多个过渡属性，必须是一一对应</div>
      <div>display:none和display:block之间不涉及到数字属性，所以过渡无效；可以使用透明度opacity从0到1的过渡</div>
    </dd>
  </dl>
  <div class="chap">案例 Cases</div>
  <dl class="nav-cont">
    <dd>[<span class="iconfont icon-keyboard"></span>] 鼠标悬停类 :hover - 改变背景颜色、背景图片、背景大小等等</dd>
    <dd>
      <div><a href="../index.html">网站 banner</a></div>
      <div><a href="./demo/up2u.html">个人网站 - 按钮</a></div>
      <div><a href="./demo/car.html">靓车荟 Cars - 汉堡菜单</a></div>
      <div><a href="./demo/animLine.html">下划线动画</a></div>
      <div><a href="./demo/animV.html">垂直滑动菜单</a></div>
      <div><a href="./demo/animH.html">水平滑动菜单</a></div>
      <div><a href="./demo/form-transition-bak.html">页面动画-简化版</a>、<a href="./demo/form-transition.html">页面动画</a>、<a
          href="./demo/animPage.html">页面动画</a></div>
    </dd>
    <dd>[<span class="iconfont icon-keyboard"></span>] 聚焦类 :focus - 多见于表单；获取焦点时，通过定位 position 或变换 transform
      移动元素</dd>
    <dd>
      <div><a href="./demo/login_deer.html">一路有你</a></div>
      <div><a href="./demo/form4.html">注册和登录</a></div>
      <div class="input-box">
        <input type="text" required>
        <div>
          <span style="--delay:0">u</span>
          <span style="--delay:1">s</span>
          <span style="--delay:2">e</span>
          <span style="--delay:3">r</span>
          <span style="--delay:4">n</span>
          <span style="--delay:5">a</span>
          <span style="--delay:6">m</span>
          <span style="--delay:7">e</span>
        </div>
      </div>
      <pre>
.input-box span {
position: absolute;
top: 1rem;
left: calc(var(--delay)*1em + 10px);
transition: .1s calc(var(--delay)*0.05s);
pointer-events: none;
}

.input-box input:focus~div span,
.input-box input:valid~div span {
top: -1rem;
}        </pre>
    </dd>
    <dd>[<span class="iconfont icon-keyboard"></span>] 选中类 :checked - 多见于表单的单选按钮或多选按钮的设计</dd>
    <dd>
      <div><a href="./demo/form5.html">定制表单元素 checkbox</a></div>
      <div><a href="https://codepen.io/glpla/full/JjwBLdg">表单元素自定义 - CodePen</a></div>
    </dd>
    <dd>[<span class="iconfont icon-keyboard"></span>] 事件类 - 单击时，为元素添加动态类，进而改变样式</dd>
    <dd>
      <div><a href="./demo/animSide.html">侧边滑动菜单</a></div>
      <div><a href="./tabcard.html">标签页/手风琴</a></div>
      <div><a href="./demo/grid-nav.html">多级菜单</a></div>
    </dd>
    <dd>[<span class="iconfont icon-keyboard"></span>] 个人信息卡 - 慢进1s快退0.5s</dd>
    <dd class="basic info-card">
      <img src="./imgs/bg.jpg" alt="">
      <div class="icons">
        <span class="iconfont icon-shouye_o"></span>
        <span class="iconfont icon-gerentouxiang_o"></span>
        <span class="iconfont icon-youjian_o"></span>
        <span class="iconfont icon-fenxiang_o"></span>
      </div>
    </dd>
    <dd>
      <pre>
.info-card img {
  position: relative;
  z-index: 1;
  transform-origin: left top;
  transition: .5s;
}

.info-card:hover img {
  transform: scale(0.8);
  transition: 1s;
}</pre>
    </dd>
    <dd>[<span class="iconfont icon-keyboard"></span>] 图片大小变化</dd>
    <dd>. 标题位置变化：开始定位在元素外部，hover时定位在元素底部</dd>
    <dd class="basic mars">
      <img class="img" src="./imgs/Mars.jfif" alt="">
      <div class="info">祝融号火星车</div>
    </dd>
    <dd>
      <pre>
.mars .img {
    transform-origin: top;
    transition: .4s;
}

.mars:hover .img {
    transform: scale(.5);
}

.mars .info {
    position: absolute;
    left: 0px;
    bottom: -60px;
    //......
    transition: .4s;
}

.mars:hover .info {
    bottom: 0px;
}</pre>
    </dd>
    <dd>[<span class="iconfont icon-keyboard"></span>] 旋转过渡：把元素的旋转点调整到左上角</dd>
    <dd class="basic rot">hover查看
      <div></div>
    </dd>
    <dd>
      <pre>
.rot div {
    position: absolute;
    left: -230px;
    top: -230px;
    width: 80%;
    height: 80%;
    border: 10px solid #b22222;
    transform-origin: left top;
    transition: 1s;
}

.rot:hover div {
    left: 10%;
    top: 10%;
    transform: rotate(360deg);
}</pre>
    </dd>
    <dd>[<span class="iconfont icon-keyboard"></span>] 伪元素旋转位移</dd>
    <dd class="basic tran">
      <div>hover查看</div>
    </dd>
    <dd>
      <pre>
.tran div::after {
    content: '';
    position: absolute;
    left: 0;
    bottom: -180px;
    width: 320px;
    height: 180px;
    background-color: #fff;
    transform-origin: left top;
    transition: 1s;
}

.tran div:hover::after {
    transform: rotate(-20deg);
}</pre>
    </dd>
    <dd>[<span class="iconfont icon-keyboard"></span>] 伪元素缩放</dd>
    <dd>. 伪元素分别设置上下边框</dd>
    <dd>. 需要显式的设置初始状态为0</dd>
    <dd class="basic border">hover查看</dd>
    <dd>
      <pre>
.border::before {
    content: '';
    position: absolute;
    left: 50%;
    top: 50%;
    width: 60%;
    height: 50%;
    border: solid #b22222;
    border-width: 4px 0;
    transform: translate(-50%, -50%) scaleX(0);
    transition: .4s;
}

.border::after {
    content: '';
    position: absolute;
    left: 50%;
    top: 50%;
    width: 50%;
    height: 60%;
    border: solid #b22222;
    border-width: 0px 4px;
    transform: translate(-50%, -50%) scaleY(0);
    transition: .4s;
}

.border:hover::before {
    transform: translate(-50%, -50%) scaleX(1);
}

.border:hover::after {
    transform: translate(-50%, -50%) scaleY(1);
}</pre>
    </dd>
  </dl>
  <div class="chap">步进 Steps</div>
  <dl class="nav-cont">
    <dt>说明</dt>
    <dd>
      <div>. 由时间函数 steps()指定的一种特殊的分段过渡效果</div>
      <pre>steps(number_of_steps，direction)</pre>
      <div>. number_of_steps：数字，过渡分几个阶段完成</div>
      <div>. direction：start和end，默认是<span class="warn">end</span>，指每个阶段过渡结束后才渲染；start则是过渡开始前就渲染</div>
      <div>. 矩形的宽度从0px，经过5个阶段，过渡到200px：0-40、40-80、80-120、120-160、160-200</div>
      <div class="flex-box">
        <div class="step-title">steps(5,end)</div>
        <div class="step-demo-end"></div>
      </div>
      <div class="flex-box">
        <div class="step-title">steps(5,start)</div>
        <div class="step-demo-start"></div>
      </div>
    </dd>
    <dd>[<span class="iconfont icon-keyboard"></span>] loading进度条 - 从0到100%</dd>
    <dd>
      <div>. 先加载再更新，所以应使用默认的end方向</div>
      <div>. 为了避免状态翻转，在结束态中指定过渡</div>
      <pre>
.step-demo-loading {
    width: 0px;
    height: 50px;
    background-color: #f40;
}

.step-demo-loading:hover {
    width: 100%;
    transition: 10s steps(10);
}</pre>
    </dd>
  </dl>
  <div class="chap">事件 Events</div>
  <dl class="nav-cont">
    <dd>
      <div>. 侦听过渡动画的执行过程</div>
      <table>
        <tr>
          <th>item</th>
          <th>desc</th>
        </tr>
        <tr>
          <td>transitionstart</td>
          <td>动画开始</td>
        </tr>
        <tr>
          <td>transitionrun</td>
          <td>动画运行</td>
        </tr>
        <tr>
          <td>transitionend</td>
          <td>动画结束</td>
        </tr>
        <tr>
          <td>transitioncancel</td>
          <td>动画取消</td>
        </tr>
      </table>
      <pre>el.addEventListener("transitionstart", (event) => {});</pre>
      <pre>el.addEventListener("transitionrun", (event) => {});</pre>
      <pre>el.addEventListener("transitionend", (event) => {});</pre>
      <pre>el.addEventListener("transitioncancel", (event) => {});</pre>
    </dd>
    <dd>[<span class="iconfont icon-keyboard"></span>] 动画结束后，切换页面；更多案例，请访问 <a href="./demo/form-transition.html">表单</a>
    </dd>
    <dd>
      <div class="demo-wrap">
        <span class="iconfont icon-home btn">返回主页</span>
      </div>
      <pre>
const wrap = document.querySelector('.demo-wrap');
const btn = document.querySelector('.btn');
btn.addEventListener('click', () => {
  wrap.classList.toggle('active');
})
wrap.addEventListener('transitionend', () => {
  if (wrap.classList.contains('active')) {
  }
  window.location.href = './index.html';
})      </pre>

    </dd>
  </dl>
  <div class="chap">总结与作业 Summary & Homework</div>
  <dl>
    <dt>总结</dt>
    <dd>1. 过渡动画的基本使用</dd>
    <dt>作业</dt>
    <dd class="sn">
      <div>独立完成上述案例</div>
      <div>利用过渡动画，完善个人网站，如导航过渡效果；个人信息过渡效果等等</div>
    </dd>
  </dl>
  <iframe src="../../common/footer.html" frameborder="0" scrolling="no" title="footer" id="footer"></iframe>
  <script src="/utils/custom/ham2024.js"></script>
  <script>
    const wrap = document.querySelector('.demo-wrap');
    const btn = document.querySelector('.btn');
    btn.addEventListener('click', () => {
      wrap.classList.toggle('active');
    })
    wrap.addEventListener('transitionend', () => {
      if (wrap.classList.contains('active')) {
      }
      window.location.href = './index.html';
    })
  </script>
</body>

</html>